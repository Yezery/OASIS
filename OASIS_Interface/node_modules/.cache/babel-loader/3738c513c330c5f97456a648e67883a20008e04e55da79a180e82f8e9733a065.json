{"ast":null,"code":"/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\nmodule.exports = runParallelLimit;\nconst queueMicrotask = require('queue-microtask');\nfunction runParallelLimit(tasks, limit, cb) {\n  if (typeof limit !== 'number') throw new Error('second argument must be a Number');\n  let results, len, pending, keys, isErrored;\n  let isSync = true;\n  let next;\n  if (Array.isArray(tasks)) {\n    results = [];\n    pending = len = tasks.length;\n  } else {\n    keys = Object.keys(tasks);\n    results = {};\n    pending = len = keys.length;\n  }\n  function done(err) {\n    function end() {\n      if (cb) cb(err, results);\n      cb = null;\n    }\n    if (isSync) queueMicrotask(end);else end();\n  }\n  function each(i, err, result) {\n    results[i] = result;\n    if (err) isErrored = true;\n    if (--pending === 0 || err) {\n      done(err);\n    } else if (!isErrored && next < len) {\n      let key;\n      if (keys) {\n        key = keys[next];\n        next += 1;\n        tasks[key](function (err, result) {\n          each(key, err, result);\n        });\n      } else {\n        key = next;\n        next += 1;\n        tasks[key](function (err, result) {\n          each(key, err, result);\n        });\n      }\n    }\n  }\n  next = limit;\n  if (!pending) {\n    // empty\n    done(null);\n  } else if (keys) {\n    // object\n    keys.some(function (key, i) {\n      tasks[key](function (err, result) {\n        each(key, err, result);\n      });\n      if (i === limit - 1) return true; // early return\n      return false;\n    });\n  } else {\n    // array\n    tasks.some(function (task, i) {\n      task(function (err, result) {\n        each(i, err, result);\n      });\n      if (i === limit - 1) return true; // early return\n      return false;\n    });\n  }\n  isSync = false;\n}","map":{"version":3,"names":["module","exports","runParallelLimit","queueMicrotask","require","tasks","limit","cb","Error","results","len","pending","keys","isErrored","isSync","next","Array","isArray","length","Object","done","err","end","each","i","result","key","some","task"],"sources":["/Users/yezery/Oasis/OASIS/node_modules/.store/run-parallel-limit@1.1.0/node_modules/run-parallel-limit/index.js"],"sourcesContent":["/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\nmodule.exports = runParallelLimit\n\nconst queueMicrotask = require('queue-microtask')\n\nfunction runParallelLimit (tasks, limit, cb) {\n  if (typeof limit !== 'number') throw new Error('second argument must be a Number')\n  let results, len, pending, keys, isErrored\n  let isSync = true\n  let next\n\n  if (Array.isArray(tasks)) {\n    results = []\n    pending = len = tasks.length\n  } else {\n    keys = Object.keys(tasks)\n    results = {}\n    pending = len = keys.length\n  }\n\n  function done (err) {\n    function end () {\n      if (cb) cb(err, results)\n      cb = null\n    }\n    if (isSync) queueMicrotask(end)\n    else end()\n  }\n\n  function each (i, err, result) {\n    results[i] = result\n    if (err) isErrored = true\n    if (--pending === 0 || err) {\n      done(err)\n    } else if (!isErrored && next < len) {\n      let key\n      if (keys) {\n        key = keys[next]\n        next += 1\n        tasks[key](function (err, result) { each(key, err, result) })\n      } else {\n        key = next\n        next += 1\n        tasks[key](function (err, result) { each(key, err, result) })\n      }\n    }\n  }\n\n  next = limit\n  if (!pending) {\n    // empty\n    done(null)\n  } else if (keys) {\n    // object\n    keys.some(function (key, i) {\n      tasks[key](function (err, result) { each(key, err, result) })\n      if (i === limit - 1) return true // early return\n      return false\n    })\n  } else {\n    // array\n    tasks.some(function (task, i) {\n      task(function (err, result) { each(i, err, result) })\n      if (i === limit - 1) return true // early return\n      return false\n    })\n  }\n\n  isSync = false\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}