{"ast":null,"code":"import drain from 'it-drain';\nimport errCode from 'err-code';\n/**\n * Wrapper class to convert events into returned values\n */\nexport class DHTContentRouting {\n  constructor(dht) {\n    this.dht = dht;\n  }\n  async provide(cid) {\n    await drain(this.dht.provide(cid));\n  }\n  async *findProviders(cid, options = {}) {\n    for await (const event of this.dht.findProviders(cid, options)) {\n      if (event.name === 'PROVIDER') {\n        yield* event.providers;\n      }\n    }\n  }\n  async put(key, value, options) {\n    await drain(this.dht.put(key, value, options));\n  }\n  async get(key, options) {\n    for await (const event of this.dht.get(key, options)) {\n      if (event.name === 'VALUE') {\n        return event.value;\n      }\n    }\n    throw errCode(new Error('Not found'), 'ERR_NOT_FOUND');\n  }\n}","map":{"version":3,"names":["drain","errCode","DHTContentRouting","constructor","dht","provide","cid","findProviders","options","event","name","providers","put","key","value","get","Error"],"sources":["../../../src/dht/dht-content-routing.ts"],"sourcesContent":[null],"mappings":"AAAA,OAAOA,KAAK,MAAM,UAAU;AAC5B,OAAOC,OAAO,MAAM,UAAU;AAM9B;;;AAGA,OAAM,MAAOC,iBAAiB;EAG5BC,YAAaC,GAAQ;IACnB,IAAI,CAACA,GAAG,GAAGA,GAAG;EAChB;EAEA,MAAMC,OAAOA,CAAEC,GAAQ;IACrB,MAAMN,KAAK,CAAC,IAAI,CAACI,GAAG,CAACC,OAAO,CAACC,GAAG,CAAC,CAAC;EACpC;EAEA,OAAQC,aAAaA,CAAED,GAAQ,EAAEE,OAAA,GAAwB,EAAE;IACzD,WAAW,MAAMC,KAAK,IAAI,IAAI,CAACL,GAAG,CAACG,aAAa,CAACD,GAAG,EAAEE,OAAO,CAAC,EAAE;MAC9D,IAAIC,KAAK,CAACC,IAAI,KAAK,UAAU,EAAE;QAC7B,OAAQD,KAAK,CAACE,SAAS;;;EAG7B;EAEA,MAAMC,GAAGA,CAAEC,GAAe,EAAEC,KAAiB,EAAEN,OAAsB;IACnE,MAAMR,KAAK,CAAC,IAAI,CAACI,GAAG,CAACQ,GAAG,CAACC,GAAG,EAAEC,KAAK,EAAEN,OAAO,CAAC,CAAC;EAChD;EAEA,MAAMO,GAAGA,CAAEF,GAAe,EAAEL,OAAsB;IAChD,WAAW,MAAMC,KAAK,IAAI,IAAI,CAACL,GAAG,CAACW,GAAG,CAACF,GAAG,EAAEL,OAAO,CAAC,EAAE;MACpD,IAAIC,KAAK,CAACC,IAAI,KAAK,OAAO,EAAE;QAC1B,OAAOD,KAAK,CAACK,KAAK;;;IAItB,MAAMb,OAAO,CAAC,IAAIe,KAAK,CAAC,WAAW,CAAC,EAAE,eAAe,CAAC;EACxD"},"metadata":{},"sourceType":"module","externalDependencies":[]}