{"ast":null,"code":"import { adverts } from '../adverts.js';\nexport function search(ssdp, message, remote) {\n  if (message.ST == null) {\n    return;\n  }\n  adverts.forEach(advert => {\n    if (message.ST === 'ssdp:all' || advert.usn.toLowerCase() === message.ST.toLowerCase()) {\n      ssdp.emit('ssdp:send-message', 'HTTP/1.1 200 OK', {\n        ST: message.ST === 'ssdp:all' ? advert.usn : message.ST,\n        USN: `${ssdp.udn}::${advert.usn}`,\n        LOCATION: advert.location,\n        'CACHE-CONTROL': `max-age=${Math.round(advert.ttl / 1000)}`,\n        DATE: new Date().toUTCString(),\n        SERVER: ssdp.signature,\n        EXT: ''\n      }, remote);\n    }\n  });\n}","map":{"version":3,"names":["adverts","search","ssdp","message","remote","ST","forEach","advert","usn","toLowerCase","emit","USN","udn","LOCATION","location","Math","round","ttl","DATE","Date","toUTCString","SERVER","signature","EXT"],"sources":["../../../src/commands/search.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,OAAO,QAAQ,eAAe;AAGvC,OAAM,SAAUC,MAAMA,CAAEC,IAAU,EAAEC,OAAsB,EAAEC,MAAsB;EAChF,IAAID,OAAO,CAACE,EAAE,IAAI,IAAI,EAAE;IACtB;;EAGFL,OAAO,CAACM,OAAO,CAACC,MAAM,IAAG;IACvB,IAAIJ,OAAO,CAACE,EAAE,KAAK,UAAU,IAAIE,MAAM,CAACC,GAAG,CAACC,WAAW,EAAE,KAAKN,OAAO,CAACE,EAAE,CAACI,WAAW,EAAE,EAAE;MACtFP,IAAI,CAACQ,IAAI,CAAC,mBAAmB,EAAE,iBAAiB,EAAE;QAChDL,EAAE,EAAEF,OAAO,CAACE,EAAE,KAAK,UAAU,GAAGE,MAAM,CAACC,GAAG,GAAGL,OAAO,CAACE,EAAE;QACvDM,GAAG,EAAE,GAAGT,IAAI,CAACU,GAAG,KAAKL,MAAM,CAACC,GAAG,EAAE;QACjCK,QAAQ,EAAEN,MAAM,CAACO,QAAQ;QACzB,eAAe,EAAE,WAAWC,IAAI,CAACC,KAAK,CAACT,MAAM,CAACU,GAAG,GAAG,IAAI,CAAC,EAAE;QAC3DC,IAAI,EAAE,IAAIC,IAAI,EAAE,CAACC,WAAW,EAAE;QAC9BC,MAAM,EAAEnB,IAAI,CAACoB,SAAS;QACtBC,GAAG,EAAE;OACN,EAAEnB,MAAM,CAAC;;EAEd,CAAC,CAAC;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}