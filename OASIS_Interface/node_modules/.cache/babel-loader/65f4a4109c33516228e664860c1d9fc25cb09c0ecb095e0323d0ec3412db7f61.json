{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mainSearch } from \"@/api/axios/ownerContractLIst\";\nexport default {\n  data() {\n    return {\n      tableData: [{\n        date: \"2016-05-02\",\n        name: \"王小虎\",\n        address: \"上海市普陀区金沙江路 1518 弄\"\n      }, {\n        date: \"2016-05-04\",\n        name: \"王小虎\",\n        address: \"上海市普陀区金沙江路 1517 弄\"\n      }, {\n        date: \"2016-05-01\",\n        name: \"王小虎\",\n        address: \"上海市普陀区金沙江路 1519 弄\"\n      }, {\n        date: \"2016-05-03\",\n        name: \"王小虎\",\n        address: \"上海市普陀区金沙江路 1516 弄\"\n      }],\n      currentPage: 1,\n      pageTicket: [],\n      selectType: {\n        three: false,\n        image: false\n      },\n      activeNames: [\"1\", \"2\", \"3\", \"4\"],\n      // ======= 后端查询\n      criteria: {\n        key: \"\",\n        isActive: false,\n        type: \"3\",\n        maxPrice: \"\",\n        minPrice: \"\",\n        maxmums: \"\",\n        minmums: \"\",\n        pageDto: {\n          page: 1,\n          pageSize: 10\n        }\n      },\n      //返回数据\n      total: 0,\n      results: []\n    };\n  },\n  mounted() {\n    // this.criteria.key = this.$route.params.searchVo.key;\n    // this.results = this.$route.params.results;\n  },\n  methods: {\n    setType() {\n      if (this.selectType.image) {\n        this.criteria.type = \"2\";\n      } else {\n        this.criteria.type = \"1\";\n      }\n      if (this.selectType.image && this.selectType.three || !this.selectType.image && !this.selectType.three) {\n        this.criteria.type = \"3\";\n      }\n    },\n    async search() {\n      console.log(this.criteria);\n      await mainSearch(this.criteria).then(re => {\n        console.log(re.data.data.data);\n        this.results = re.data.data.data;\n        this.total = re.data.data.total;\n        this.getPageInfo();\n      });\n    },\n    getPageInfo() {\n      //清空pageTicket中的数据\n      this.pageTicket = [];\n      // 获取当前页的数据\n      for (let i = (this.currentpage - 1) * this.criteria.pagesize; i < this.total; i++) {\n        //把遍历的数据添加到pageTicket里面\n        this.pageTicket.push(this.ticket[i]);\n        //判断是否达到一页的要求\n        if (this.pageTicket.length === this.pagesize) break;\n      }\n    },\n    async handleCurrentChange(val) {\n      this.criteria.pageDto.page = val;\n      console.log(`当前页: ${val}`);\n    }\n  }\n};","map":{"version":3,"names":["mainSearch","data","tableData","date","name","address","currentPage","pageTicket","selectType","three","image","activeNames","criteria","key","isActive","type","maxPrice","minPrice","maxmums","minmums","pageDto","page","pageSize","total","results","mounted","methods","setType","search","console","log","then","re","getPageInfo","i","currentpage","pagesize","push","ticket","length","handleCurrentChange","val"],"sources":["src/views/main/marketShop/searchPage.vue"],"sourcesContent":["<template>\n  <div class=\"Main\">\n    <div class=\"Main_left\">\n      <div class=\"Main_left_Select\">\n        <div class=\"Main_left_SelectBox\">\n          <el-collapse v-model=\"activeNames\">\n            <el-collapse-item name=\"1\">\n              <template slot=\"title\">\n                类型 <i class=\"header-icon el-icon-info\" />\n              </template>\n              <div class=\"selectBox\">\n                <div>3D:</div>\n                <div>\n                  <el-switch\n                    v-model=\"selectType.three\"\n                    active-color=\"#000000\"\n                    inactive-color=\"#808080\"\n                    :active-value=\"true\"\n                    :inactive-value=\"false\"\n                    @change=\"setType\"\n                  />\n                </div>\n              </div>\n              <div class=\"selectBox\">\n                <div>图片:</div>\n                <div>\n                  <el-switch\n                    v-model=\"selectType.image\"\n                    active-color=\"#000000\"\n                    inactive-color=\"#808080\"\n                    :active-value=\"true\"\n                    :inactive-value=\"false\"\n                    @change=\"setType\"\n                  />\n                </div>\n              </div>\n            </el-collapse-item>\n            <el-collapse-item\n              title=\"状态\"\n              name=\"2\"\n            >\n              <div class=\"selectBox\">\n                <div v-if=\"criteria.isActive\">\n                  在售:\n                </div>\n                <div v-else>\n                  未售:\n                </div>\n                <div>\n                  <el-switch\n                    v-model=\"criteria.isActive\"\n                    active-color=\"#000000\"\n                    inactive-color=\"#808080\"\n                    :active-value=\"true\"\n                    :inactive-value=\"false\"\n                  />\n                </div>\n              </div>\n            </el-collapse-item>\n            <el-collapse-item\n              title=\"价格\"\n              name=\"3\"\n            >\n              <span>\n                <el-input\n                  v-model=\"criteria.maxPrice\"\n                  placeholder=\"最高价\"\n                  :clearable=\"true\"\n                />\n                ETH\n              </span>\n              <span>\n                <el-input\n                  v-model=\"criteria.minPrice\"\n                  placeholder=\"最低价\"\n                  :clearable=\"true\"\n                />\n                ETH\n              </span>\n            </el-collapse-item>\n            <el-collapse-item\n              title=\"供应量\"\n              name=\"4\"\n            >\n              <span>\n                <el-input\n                  v-model=\"criteria.maxmums\"\n                  placeholder=\"至多\"\n                  :clearable=\"true\"\n                />\n                <div>\n                  ~\n                </div>\n              </span>\n              <span>\n                <el-input\n                  v-model=\"criteria.minmums\"\n                  placeholder=\"至少\"\n                  :clearable=\"true\"\n                />\n              </span>\n            </el-collapse-item>\n          </el-collapse>\n        </div>\n      </div>\n    </div>\n    <div class=\"Main_right\">\n      <div class=\"Main_right_top\">\n        <span>NFT</span> <span>Count:{{ total }}</span>\n        <div>\n          <el-input\n            placeholder=\"请输入内容\"\n            prefix-icon=\"el-icon-search\"\n            v-model=\"criteria.key\"\n            :clearable=\"true\"\n            @keydown.enter.prevent.native=\"search\"\n          />\n        </div>\n      </div>\n      <div class=\"Main_right_bottom\">\n        <el-table\n          :data=\"results\"\n          class=\"selectTable\"\n        >\n          <template slot=\"empty\">\n            <div>\n              <img\n                style=\"padding: 10% 0 0 0;\"\n                width=\"20%\"\n                height=\"20%\"\n                src=\"@/assets/webAssets/MetaMask.png\"\n                alt=\"\"\n              >\n              <h4 style=\"padding: 0 0 10% 0\">\n                浏览器未连接Metamask\n              </h4>\n            </div>\n          </template>\n          <el-table-column\n            type=\"index\"\n            width=\"70\"\n            label=\"Rank\"\n          />\n          <el-table-column label=\"藏品\">\n            <template slot-scope=\"scope\">\n              <div class=\"collectionRow\">\n                <div\n                  class=\"collectionImageBorder\"\n                  style=\"display: inline-block;\"\n                >\n                  <img\n                    class=\"nftImage\"\n                    v-if=\"scope.row.description != '3D'\"\n                    :src=\"scope.row.ipfsPath\"\n                    alt=\"\"\n                  >\n                </div>\n                <div style=\"padding-left: 20px; font-size: 1vw; display: inline-block;\">\n                  {{ scope.row.nftName }}\n                  <span style=\"font-size: 0.5vw;\">\n                    #{{ scope.row.tokenId }}\n                  </span>\n                </div>\n              </div>\n            </template>\n          </el-table-column>\n          <el-table-column\n            align=\"center\"\n            label=\"价格\"\n            fixed=\"right\"\n            width=\"150\"\n          >\n            <template slot-scope=\"scope\">\n              {{ scope.row.price }}\n              <!-- <h4> {{ $store.state.Web3.utils.fromWei(scope.row.price, 'ether') }} ETH</h4> -->\n            </template>\n          </el-table-column>\n        </el-table>\n        <el-pagination\n          layout=\"prev, pager, next\"\n          @current-change=\"handleCurrentChange\"\n          :total=\"total\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import { mainSearch } from \"@/api/axios/ownerContractLIst\";\n  export default {\n    data() {\n      return {\n        tableData: [\n          {\n            date: \"2016-05-02\",\n            name: \"王小虎\",\n            address: \"上海市普陀区金沙江路 1518 弄\",\n          },\n          {\n            date: \"2016-05-04\",\n            name: \"王小虎\",\n            address: \"上海市普陀区金沙江路 1517 弄\",\n          },\n          {\n            date: \"2016-05-01\",\n            name: \"王小虎\",\n            address: \"上海市普陀区金沙江路 1519 弄\",\n          },\n          {\n            date: \"2016-05-03\",\n            name: \"王小虎\",\n            address: \"上海市普陀区金沙江路 1516 弄\",\n          },\n        ],\n        currentPage: 1,\n        pageTicket:[],\n        selectType: {\n          three: false,\n          image: false,\n        },\n        activeNames: [\"1\", \"2\", \"3\", \"4\"],\n       \n        // ======= 后端查询\n        criteria: {\n          key: \"\",\n          isActive: false,\n          type: \"3\",\n          maxPrice: \"\",\n          minPrice: \"\",\n          maxmums: \"\",\n          minmums: \"\",\n          pageDto: {\n            page: 1,\n            pageSize: 10,\n          },\n        },\n        //返回数据\n        total: 0,\n        results: [],\n      };\n    },\n    mounted() {\n      // this.criteria.key = this.$route.params.searchVo.key;\n      // this.results = this.$route.params.results;\n    },\n    methods: {\n      setType() {\n        if (this.selectType.image) {\n          this.criteria.type = \"2\";\n        } else {\n          this.criteria.type = \"1\";\n        }\n        if (\n          (this.selectType.image && this.selectType.three) ||\n          (!this.selectType.image && !this.selectType.three)\n        ) {\n          this.criteria.type = \"3\";\n        }\n      },\n      async search() {\n        console.log(this.criteria);\n        await mainSearch(this.criteria).then((re) => {\n          console.log(re.data.data.data);\n        \n            this.results = re.data.data.data;\n         \n          this.total = re.data.data.total;\n          this.getPageInfo(); \n        });\n      },\n      getPageInfo(){\n      //清空pageTicket中的数据\n      this.pageTicket=[];\n      // 获取当前页的数据\n      for(let i=(this.currentpage-1)*this.criteria. pagesize;i<this.total;i++){\n        //把遍历的数据添加到pageTicket里面\n        this.pageTicket.push(this.ticket[i]);\n        //判断是否达到一页的要求\n        if(this.pageTicket.length===this.pagesize) break;\n      }\n\t},\n      async handleCurrentChange(val) {\n        this.criteria.pageDto.page = val;\n\n        console.log(`当前页: ${val}`);\n      },\n    },\n  };\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"@/style/marketShop/searchPage.scss\";\n</style>"],"mappings":";AA6LA,SAAAA,UAAA;AACA;EACAC,KAAA;IACA;MACAC,SAAA,GACA;QACAC,IAAA;QACAC,IAAA;QACAC,OAAA;MACA,GACA;QACAF,IAAA;QACAC,IAAA;QACAC,OAAA;MACA,GACA;QACAF,IAAA;QACAC,IAAA;QACAC,OAAA;MACA,GACA;QACAF,IAAA;QACAC,IAAA;QACAC,OAAA;MACA,EACA;MACAC,WAAA;MACAC,UAAA;MACAC,UAAA;QACAC,KAAA;QACAC,KAAA;MACA;MACAC,WAAA;MAEA;MACAC,QAAA;QACAC,GAAA;QACAC,QAAA;QACAC,IAAA;QACAC,QAAA;QACAC,QAAA;QACAC,OAAA;QACAC,OAAA;QACAC,OAAA;UACAC,IAAA;UACAC,QAAA;QACA;MACA;MACA;MACAC,KAAA;MACAC,OAAA;IACA;EACA;EACAC,QAAA;IACA;IACA;EAAA,CACA;EACAC,OAAA;IACAC,QAAA;MACA,SAAAnB,UAAA,CAAAE,KAAA;QACA,KAAAE,QAAA,CAAAG,IAAA;MACA;QACA,KAAAH,QAAA,CAAAG,IAAA;MACA;MACA,IACA,KAAAP,UAAA,CAAAE,KAAA,SAAAF,UAAA,CAAAC,KAAA,IACA,MAAAD,UAAA,CAAAE,KAAA,UAAAF,UAAA,CAAAC,KAAA,EACA;QACA,KAAAG,QAAA,CAAAG,IAAA;MACA;IACA;IACA,MAAAa,OAAA;MACAC,OAAA,CAAAC,GAAA,MAAAlB,QAAA;MACA,MAAAZ,UAAA,MAAAY,QAAA,EAAAmB,IAAA,CAAAC,EAAA;QACAH,OAAA,CAAAC,GAAA,CAAAE,EAAA,CAAA/B,IAAA,CAAAA,IAAA,CAAAA,IAAA;QAEA,KAAAuB,OAAA,GAAAQ,EAAA,CAAA/B,IAAA,CAAAA,IAAA,CAAAA,IAAA;QAEA,KAAAsB,KAAA,GAAAS,EAAA,CAAA/B,IAAA,CAAAA,IAAA,CAAAsB,KAAA;QACA,KAAAU,WAAA;MACA;IACA;IACAA,YAAA;MACA;MACA,KAAA1B,UAAA;MACA;MACA,SAAA2B,CAAA,SAAAC,WAAA,aAAAvB,QAAA,CAAAwB,QAAA,EAAAF,CAAA,QAAAX,KAAA,EAAAW,CAAA;QACA;QACA,KAAA3B,UAAA,CAAA8B,IAAA,MAAAC,MAAA,CAAAJ,CAAA;QACA;QACA,SAAA3B,UAAA,CAAAgC,MAAA,UAAAH,QAAA;MACA;IACA;IACA,MAAAI,oBAAAC,GAAA;MACA,KAAA7B,QAAA,CAAAQ,OAAA,CAAAC,IAAA,GAAAoB,GAAA;MAEAZ,OAAA,CAAAC,GAAA,SAAAW,GAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}