{"ast":null,"code":"'use strict';\n\nconst getTime = require('./time');\nclass Retimer {\n  constructor(callback, timeout, args) {\n    const that = this;\n    this._started = getTime();\n    this._rescheduled = 0;\n    this._scheduled = timeout;\n    this._args = args;\n    this._triggered = false;\n    this._timerWrapper = () => {\n      if (that._rescheduled > 0) {\n        that._scheduled = that._rescheduled - (getTime() - that._started);\n        that._schedule(that._scheduled);\n      } else {\n        that._triggered = true;\n        callback.apply(null, that._args);\n      }\n    };\n    this._timer = setTimeout(this._timerWrapper, timeout);\n  }\n  reschedule(timeout) {\n    if (!timeout) {\n      timeout = this._scheduled;\n    }\n    const now = getTime();\n    if (now + timeout - (this._started + this._scheduled) < 0) {\n      clearTimeout(this._timer);\n      this._schedule(timeout);\n    } else if (!this._triggered) {\n      this._started = now;\n      this._rescheduled = timeout;\n    } else {\n      this._schedule(timeout);\n    }\n  }\n  _schedule(timeout) {\n    this._triggered = false;\n    this._started = getTime();\n    this._rescheduled = 0;\n    this._scheduled = timeout;\n    this._timer = setTimeout(this._timerWrapper, timeout);\n  }\n  clear() {\n    clearTimeout(this._timer);\n  }\n}\nfunction retimer() {\n  if (typeof arguments[0] !== 'function') {\n    throw new Error('callback needed');\n  }\n  if (typeof arguments[1] !== 'number') {\n    throw new Error('timeout needed');\n  }\n  let args;\n  if (arguments.length > 0) {\n    args = new Array(arguments.length - 2);\n\n    /* eslint-disable no-var */\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i + 2];\n    }\n  }\n  return new Retimer(arguments[0], arguments[1], args);\n}\nmodule.exports = retimer;","map":{"version":3,"names":["getTime","require","Retimer","constructor","callback","timeout","args","that","_started","_rescheduled","_scheduled","_args","_triggered","_timerWrapper","_schedule","apply","_timer","setTimeout","reschedule","now","clearTimeout","clear","retimer","arguments","Error","length","Array","i","module","exports"],"sources":["/Users/yezery/Oasis/OASIS/node_modules/.store/retimer@3.0.0/node_modules/retimer/retimer.js"],"sourcesContent":["'use strict'\n\nconst getTime = require('./time')\n\nclass Retimer {\n  constructor (callback, timeout, args) {\n    const that = this\n\n    this._started = getTime()\n    this._rescheduled = 0\n    this._scheduled = timeout\n    this._args = args\n    this._triggered = false\n\n    this._timerWrapper = () => {\n      if (that._rescheduled > 0) {\n        that._scheduled = that._rescheduled - (getTime() - that._started)\n        that._schedule(that._scheduled)\n      } else {\n        that._triggered = true\n        callback.apply(null, that._args)\n      }\n    }\n\n    this._timer = setTimeout(this._timerWrapper, timeout)\n  }\n\n  reschedule (timeout) {\n    if (!timeout) {\n      timeout = this._scheduled\n    }\n    const now = getTime()\n    if ((now + timeout) - (this._started + this._scheduled) < 0) {\n      clearTimeout(this._timer)\n      this._schedule(timeout)\n    } else if (!this._triggered) {\n      this._started = now\n      this._rescheduled = timeout\n    } else {\n      this._schedule(timeout)\n    }\n  }\n\n  _schedule (timeout) {\n    this._triggered = false\n    this._started = getTime()\n    this._rescheduled = 0\n    this._scheduled = timeout\n    this._timer = setTimeout(this._timerWrapper, timeout)\n  }\n\n  clear () {\n    clearTimeout(this._timer)\n  }\n}\n\nfunction retimer () {\n  if (typeof arguments[0] !== 'function') {\n    throw new Error('callback needed')\n  }\n\n  if (typeof arguments[1] !== 'number') {\n    throw new Error('timeout needed')\n  }\n\n  let args\n\n  if (arguments.length > 0) {\n    args = new Array(arguments.length - 2)\n\n    /* eslint-disable no-var */\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i + 2]\n    }\n  }\n\n  return new Retimer(arguments[0], arguments[1], args)\n}\n\nmodule.exports = retimer\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}