{"ast":null,"code":"'use strict';\n\nrequire(\"core-js/modules/es.typed-array.to-reversed.js\");\nrequire(\"core-js/modules/es.typed-array.to-sorted.js\");\nrequire(\"core-js/modules/es.typed-array.with.js\");\nrequire(\"core-js/modules/es.array.push.js\");\nvar path = require('path');\nvar ndarray = require('ndarray');\nvar GifReader = require('omggif').GifReader;\nvar pack = require('ndarray-pack');\nvar through = require('through');\nvar parseDataURI = require('data-uri-to-buffer');\nfunction defaultImage(url, cb) {\n  var img = new Image();\n  img.crossOrigin = \"Anonymous\";\n  img.onload = function () {\n    var canvas = document.createElement('canvas');\n    canvas.width = img.width;\n    canvas.height = img.height;\n    var context = canvas.getContext('2d');\n    context.drawImage(img, 0, 0);\n    var pixels = context.getImageData(0, 0, img.width, img.height);\n    cb(null, ndarray(new Uint8Array(pixels.data), [img.width, img.height, 4], [4, 4 * img.width, 1], 0));\n  };\n  img.onerror = function (err) {\n    cb(err);\n  };\n  img.src = url;\n}\n\n//Animated gif loading\nfunction handleGif(data, cb) {\n  var reader;\n  try {\n    reader = new GifReader(data);\n  } catch (err) {\n    cb(err);\n    return;\n  }\n  if (reader.numFrames() > 0) {\n    var framesInfo = [];\n    var nshape = [reader.numFrames(), reader.height, reader.width, 4];\n    var ndata = new Uint8Array(nshape[0] * nshape[1] * nshape[2] * nshape[3]);\n    var result = ndarray(ndata, nshape);\n    try {\n      for (var i = 0; i < reader.numFrames(); ++i) {\n        reader.decodeAndBlitFrameRGBA(i, ndata.subarray(result.index(i, 0, 0, 0), result.index(i + 1, 0, 0, 0)));\n        framesInfo.push(reader.frameInfo(i));\n      }\n    } catch (err) {\n      cb(err);\n      return;\n    }\n    cb(null, result.transpose(0, 2, 1), framesInfo);\n  } else {\n    var nshape = [reader.height, reader.width, 4];\n    var ndata = new Uint8Array(nshape[0] * nshape[1] * nshape[2]);\n    var result = ndarray(ndata, nshape);\n    try {\n      reader.decodeAndBlitFrameRGBA(0, ndata);\n    } catch (err) {\n      cb(err);\n      return;\n    }\n    cb(null, result.transpose(1, 0));\n  }\n}\nfunction httpGif(url, cb) {\n  var xhr = new XMLHttpRequest();\n  xhr.open('GET', url, true);\n  xhr.responseType = 'arraybuffer';\n  if (xhr.overrideMimeType) {\n    xhr.overrideMimeType('application/binary');\n  }\n  xhr.onerror = function (err) {\n    cb(err);\n  };\n  xhr.onload = function () {\n    if (xhr.readyState !== 4) {\n      return;\n    }\n    var data = new Uint8Array(xhr.response);\n    handleGif(data, cb);\n    return;\n  };\n  xhr.send();\n}\nfunction copyBuffer(buffer) {\n  if (buffer[0] === undefined) {\n    var n = buffer.length;\n    var result = new Uint8Array(n);\n    for (var i = 0; i < n; ++i) {\n      result[i] = buffer.get(i);\n    }\n    return result;\n  } else {\n    return new Uint8Array(buffer);\n  }\n}\nfunction dataGif(url, cb) {\n  process.nextTick(function () {\n    try {\n      var buffer = parseDataURI(url);\n      if (buffer) {\n        handleGif(copyBuffer(buffer), cb);\n      } else {\n        cb(new Error('Error parsing data URI'));\n      }\n    } catch (err) {\n      cb(err);\n    }\n  });\n}\nmodule.exports = function getPixels(url, type, cb) {\n  if (!cb) {\n    cb = type;\n    type = '';\n  }\n  var ext = path.extname(url);\n  switch (type || ext.toUpperCase()) {\n    case '.GIF':\n      httpGif(url, cb);\n      break;\n    default:\n      if (Buffer.isBuffer(url)) {\n        url = 'data:' + type + ';base64,' + url.toString('base64');\n      }\n      if (url.indexOf('data:image/gif;') === 0) {\n        dataGif(url, cb);\n      } else {\n        defaultImage(url, cb);\n      }\n  }\n};","map":{"version":3,"names":["require","path","ndarray","GifReader","pack","through","parseDataURI","defaultImage","url","cb","img","Image","crossOrigin","onload","canvas","document","createElement","width","height","context","getContext","drawImage","pixels","getImageData","Uint8Array","data","onerror","err","src","handleGif","reader","numFrames","framesInfo","nshape","ndata","result","i","decodeAndBlitFrameRGBA","subarray","index","push","frameInfo","transpose","httpGif","xhr","XMLHttpRequest","open","responseType","overrideMimeType","readyState","response","send","copyBuffer","buffer","undefined","n","length","get","dataGif","process","nextTick","Error","module","exports","getPixels","type","ext","extname","toUpperCase","Buffer","isBuffer","toString","indexOf"],"sources":["/Users/yezery/Documents/大学素材/毕业设计/OASIS/OASIS_Interface/node_modules/.store/get-pixels-frame-info-update@3.3.2/node_modules/get-pixels-frame-info-update/dom-pixels.js"],"sourcesContent":["'use strict'\n\nvar path          = require('path')\nvar ndarray       = require('ndarray')\nvar GifReader     = require('omggif').GifReader\nvar pack          = require('ndarray-pack')\nvar through       = require('through')\nvar parseDataURI  = require('data-uri-to-buffer')\n\nfunction defaultImage(url, cb) {\n  var img = new Image()\n  img.crossOrigin = \"Anonymous\"\n  img.onload = function() {\n    var canvas = document.createElement('canvas')\n    canvas.width = img.width\n    canvas.height = img.height\n    var context = canvas.getContext('2d')\n    context.drawImage(img, 0, 0)\n    var pixels = context.getImageData(0, 0, img.width, img.height)\n    cb(null, ndarray(new Uint8Array(pixels.data), [img.width, img.height, 4], [4, 4*img.width, 1], 0))\n  }\n  img.onerror = function(err) {\n    cb(err)\n  }\n  img.src = url\n}\n\n//Animated gif loading\nfunction handleGif(data, cb) {\n  var reader\n  try {\n    reader = new GifReader(data)\n  } catch(err) {\n    cb(err)\n    return\n  }\n  if(reader.numFrames() > 0) {\n    var framesInfo = []\n    var nshape = [reader.numFrames(), reader.height, reader.width, 4]\n    var ndata = new Uint8Array(nshape[0] * nshape[1] * nshape[2] * nshape[3])\n    var result = ndarray(ndata, nshape)\n    try {\n      for(var i=0; i<reader.numFrames(); ++i) {\n        reader.decodeAndBlitFrameRGBA(i, ndata.subarray(\n          result.index(i, 0, 0, 0),\n          result.index(i+1, 0, 0, 0)));\n        framesInfo.push(reader.frameInfo(i));\n      }\n    } catch(err) {\n      cb(err)\n      return\n    }\n    cb(null, result.transpose(0,2,1), framesInfo)\n  } else {\n    var nshape = [reader.height, reader.width, 4]\n    var ndata = new Uint8Array(nshape[0] * nshape[1] * nshape[2])\n    var result = ndarray(ndata, nshape)\n    try {\n      reader.decodeAndBlitFrameRGBA(0, ndata)\n    } catch(err) {\n      cb(err)\n      return\n    }\n    cb(null, result.transpose(1,0))\n  }\n}\n\nfunction httpGif(url, cb) {\n  var xhr          = new XMLHttpRequest()\n  xhr.open('GET', url, true)\n  xhr.responseType = 'arraybuffer'\n  if(xhr.overrideMimeType){\n    xhr.overrideMimeType('application/binary')\n  }\n  xhr.onerror = function(err) {\n    cb(err)\n  }\n  xhr.onload = function() {\n    if(xhr.readyState !== 4) {\n      return\n    }\n    var data = new Uint8Array(xhr.response)\n    handleGif(data, cb)\n    return\n  }\n  xhr.send()\n}\n\nfunction copyBuffer(buffer) {\n  if(buffer[0] === undefined) {\n    var n = buffer.length\n    var result = new Uint8Array(n)\n    for(var i=0; i<n; ++i) {\n      result[i] = buffer.get(i)\n    }\n    return result\n  } else {\n    return new Uint8Array(buffer)\n  }\n}\n\nfunction dataGif(url, cb) {\n  process.nextTick(function() {\n    try {\n      var buffer = parseDataURI(url)\n      if(buffer) {\n        handleGif(copyBuffer(buffer), cb)\n      } else {\n        cb(new Error('Error parsing data URI'))\n      }\n    } catch(err) {\n      cb(err)\n    }\n  })\n}\n\nmodule.exports = function getPixels(url, type, cb) {\n  if(!cb) {\n    cb = type\n    type = ''\n  }\n  var ext = path.extname(url)\n  switch(type || ext.toUpperCase()) {\n    case '.GIF':\n      httpGif(url, cb)\n    break\n    default:\n      if(Buffer.isBuffer(url)) {\n        url = 'data:' + type + ';base64,' + url.toString('base64')\n      }\n      if(url.indexOf('data:image/gif;') === 0) {\n        dataGif(url, cb)\n      } else {\n        defaultImage(url, cb)\n      }\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}