{"ast":null,"code":"import _defineProperty from \"/Users/yezery/Oasis/OASIS/node_modules/.store/@babel+runtime@7.22.15/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nlet _Symbol$iterator;\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.unshift.js\";\nimport { peerIdFromString } from '@libp2p/peer-id';\nimport { mapIterable } from './util.js';\n/**\n * We can't use PeerIds as list entries because list entries are\n * compared using same-value-zero equality, so this is just\n * a map that stringifies the PeerIds before storing them.\n *\n * PeerIds cache stringified versions of themselves so this\n * should be a cheap operation.\n *\n * @example\n *\n * ```JavaScript\n * import { peerList } from '@libp2p/peer-collections'\n *\n * const list = peerList()\n * list.push(peerId)\n * ```\n */\n_Symbol$iterator = Symbol.iterator;\nexport class PeerList {\n  constructor(list) {\n    _defineProperty(this, \"list\", void 0);\n    this.list = [];\n    if (list != null) {\n      for (const value of list) {\n        this.list.push(value.toString());\n      }\n    }\n  }\n  [_Symbol$iterator]() {\n    return mapIterable(this.list.entries(), val => {\n      return peerIdFromString(val[1]);\n    });\n  }\n  concat(list) {\n    const output = new PeerList(this);\n    for (const value of list) {\n      output.push(value);\n    }\n    return output;\n  }\n  entries() {\n    return mapIterable(this.list.entries(), val => {\n      return [val[0], peerIdFromString(val[1])];\n    });\n  }\n  every(predicate) {\n    return this.list.every((str, index) => {\n      return predicate(peerIdFromString(str), index, this);\n    });\n  }\n  filter(predicate) {\n    const output = new PeerList();\n    this.list.forEach((str, index) => {\n      const peerId = peerIdFromString(str);\n      if (predicate(peerId, index, this)) {\n        output.push(peerId);\n      }\n    });\n    return output;\n  }\n  find(predicate) {\n    const str = this.list.find((str, index) => {\n      return predicate(peerIdFromString(str), index, this);\n    });\n    if (str == null) {\n      return undefined;\n    }\n    return peerIdFromString(str);\n  }\n  findIndex(predicate) {\n    return this.list.findIndex((str, index) => {\n      return predicate(peerIdFromString(str), index, this);\n    });\n  }\n  forEach(predicate) {\n    this.list.forEach((str, index) => {\n      predicate(peerIdFromString(str), index, this);\n    });\n  }\n  includes(peerId) {\n    return this.list.includes(peerId.toString());\n  }\n  indexOf(peerId) {\n    return this.list.indexOf(peerId.toString());\n  }\n  pop() {\n    const str = this.list.pop();\n    if (str == null) {\n      return undefined;\n    }\n    return peerIdFromString(str);\n  }\n  push(...peerIds) {\n    for (const peerId of peerIds) {\n      this.list.push(peerId.toString());\n    }\n  }\n  shift() {\n    const str = this.list.shift();\n    if (str == null) {\n      return undefined;\n    }\n    return peerIdFromString(str);\n  }\n  unshift(...peerIds) {\n    let len = this.list.length;\n    for (let i = peerIds.length - 1; i > -1; i--) {\n      len = this.list.unshift(peerIds[i].toString());\n    }\n    return len;\n  }\n  get length() {\n    return this.list.length;\n  }\n}","map":{"version":3,"names":["peerIdFromString","mapIterable","_Symbol$iterator","Symbol","iterator","PeerList","constructor","list","_defineProperty","value","push","toString","entries","val","concat","output","every","predicate","str","index","filter","forEach","peerId","find","undefined","findIndex","includes","indexOf","pop","peerIds","shift","unshift","len","length","i"],"sources":["../../src/list.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}