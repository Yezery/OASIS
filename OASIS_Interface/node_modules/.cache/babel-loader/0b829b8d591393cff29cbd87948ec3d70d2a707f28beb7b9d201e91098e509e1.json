{"ast":null,"code":"require(\"core-js/modules/es.array.push.js\");\nconst Fifo = require('fast-fifo');\nconst defer = require('p-defer');\nmodule.exports = class PFifo {\n  constructor() {\n    this._buffer = new Fifo();\n    this._waitingConsumers = new Fifo();\n  }\n  push(chunk) {\n    const {\n      promise,\n      resolve\n    } = defer();\n    this._buffer.push({\n      chunk,\n      resolve\n    });\n    this._consume();\n    return promise;\n  }\n  _consume() {\n    while (!this._waitingConsumers.isEmpty() && !this._buffer.isEmpty()) {\n      const nextConsumer = this._waitingConsumers.shift();\n      const nextChunk = this._buffer.shift();\n      nextConsumer.resolve(nextChunk.chunk);\n      nextChunk.resolve();\n    }\n  }\n  shift() {\n    const {\n      promise,\n      resolve\n    } = defer();\n    this._waitingConsumers.push({\n      resolve\n    });\n    this._consume();\n    return promise;\n  }\n  isEmpty() {\n    return this._buffer.isEmpty();\n  }\n};","map":{"version":3,"names":["Fifo","require","defer","module","exports","PFifo","constructor","_buffer","_waitingConsumers","push","chunk","promise","resolve","_consume","isEmpty","nextConsumer","shift","nextChunk"],"sources":["/Users/yezery/Oasis/OASIS/node_modules/.store/p-fifo@1.0.0/node_modules/p-fifo/index.js"],"sourcesContent":["const Fifo = require('fast-fifo')\nconst defer = require('p-defer')\n\nmodule.exports = class PFifo {\n  constructor () {\n    this._buffer = new Fifo()\n    this._waitingConsumers = new Fifo()\n  }\n\n  push (chunk) {\n    const { promise, resolve } = defer()\n    this._buffer.push({ chunk, resolve })\n    this._consume()\n    return promise\n  }\n\n  _consume () {\n    while (!this._waitingConsumers.isEmpty() && !this._buffer.isEmpty()) {\n      const nextConsumer = this._waitingConsumers.shift()\n      const nextChunk = this._buffer.shift()\n      nextConsumer.resolve(nextChunk.chunk)\n      nextChunk.resolve()\n    }\n  }\n\n  shift () {\n    const { promise, resolve } = defer()\n    this._waitingConsumers.push({ resolve })\n    this._consume()\n    return promise\n  }\n\n  isEmpty () {\n    return this._buffer.isEmpty()\n  }\n}\n"],"mappings":";AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAC,WAAW,CAAC;AACjC,MAAMC,KAAK,GAAGD,OAAO,CAAC,SAAS,CAAC;AAEhCE,MAAM,CAACC,OAAO,GAAG,MAAMC,KAAK,CAAC;EAC3BC,WAAWA,CAAA,EAAI;IACb,IAAI,CAACC,OAAO,GAAG,IAAIP,IAAI,CAAC,CAAC;IACzB,IAAI,CAACQ,iBAAiB,GAAG,IAAIR,IAAI,CAAC,CAAC;EACrC;EAEAS,IAAIA,CAAEC,KAAK,EAAE;IACX,MAAM;MAAEC,OAAO;MAAEC;IAAQ,CAAC,GAAGV,KAAK,CAAC,CAAC;IACpC,IAAI,CAACK,OAAO,CAACE,IAAI,CAAC;MAAEC,KAAK;MAAEE;IAAQ,CAAC,CAAC;IACrC,IAAI,CAACC,QAAQ,CAAC,CAAC;IACf,OAAOF,OAAO;EAChB;EAEAE,QAAQA,CAAA,EAAI;IACV,OAAO,CAAC,IAAI,CAACL,iBAAiB,CAACM,OAAO,CAAC,CAAC,IAAI,CAAC,IAAI,CAACP,OAAO,CAACO,OAAO,CAAC,CAAC,EAAE;MACnE,MAAMC,YAAY,GAAG,IAAI,CAACP,iBAAiB,CAACQ,KAAK,CAAC,CAAC;MACnD,MAAMC,SAAS,GAAG,IAAI,CAACV,OAAO,CAACS,KAAK,CAAC,CAAC;MACtCD,YAAY,CAACH,OAAO,CAACK,SAAS,CAACP,KAAK,CAAC;MACrCO,SAAS,CAACL,OAAO,CAAC,CAAC;IACrB;EACF;EAEAI,KAAKA,CAAA,EAAI;IACP,MAAM;MAAEL,OAAO;MAAEC;IAAQ,CAAC,GAAGV,KAAK,CAAC,CAAC;IACpC,IAAI,CAACM,iBAAiB,CAACC,IAAI,CAAC;MAAEG;IAAQ,CAAC,CAAC;IACxC,IAAI,CAACC,QAAQ,CAAC,CAAC;IACf,OAAOF,OAAO;EAChB;EAEAG,OAAOA,CAAA,EAAI;IACT,OAAO,IAAI,CAACP,OAAO,CAACO,OAAO,CAAC,CAAC;EAC/B;AACF,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}