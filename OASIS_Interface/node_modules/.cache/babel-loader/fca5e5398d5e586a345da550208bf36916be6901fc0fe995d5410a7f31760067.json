{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { Token, Type } from './token.js';\nimport { assertEnoughData, decodeErrPrefix } from './common.js';\nimport * as uint from './0uint.js';\nimport { compare, fromString, slice } from './byte-utils.js';\n\n/**\n * @typedef {import('./bl.js').Bl} Bl\n * @typedef {import('../interface').DecodeOptions} DecodeOptions\n */\n\n/**\n * @param {Uint8Array} data\n * @param {number} pos\n * @param {number} prefix\n * @param {number} length\n * @returns {Token}\n */\nfunction toToken(data, pos, prefix, length) {\n  assertEnoughData(data, pos, prefix + length);\n  const buf = slice(data, pos + prefix, pos + prefix + length);\n  return new Token(Type.bytes, buf, prefix + length);\n}\n\n/**\n * @param {Uint8Array} data\n * @param {number} pos\n * @param {number} minor\n * @param {DecodeOptions} _options\n * @returns {Token}\n */\nexport function decodeBytesCompact(data, pos, minor, _options) {\n  return toToken(data, pos, 1, minor);\n}\n\n/**\n * @param {Uint8Array} data\n * @param {number} pos\n * @param {number} _minor\n * @param {DecodeOptions} options\n * @returns {Token}\n */\nexport function decodeBytes8(data, pos, _minor, options) {\n  return toToken(data, pos, 2, uint.readUint8(data, pos + 1, options));\n}\n\n/**\n * @param {Uint8Array} data\n * @param {number} pos\n * @param {number} _minor\n * @param {DecodeOptions} options\n * @returns {Token}\n */\nexport function decodeBytes16(data, pos, _minor, options) {\n  return toToken(data, pos, 3, uint.readUint16(data, pos + 1, options));\n}\n\n/**\n * @param {Uint8Array} data\n * @param {number} pos\n * @param {number} _minor\n * @param {DecodeOptions} options\n * @returns {Token}\n */\nexport function decodeBytes32(data, pos, _minor, options) {\n  return toToken(data, pos, 5, uint.readUint32(data, pos + 1, options));\n}\n\n// TODO: maybe we shouldn't support this ..\n/**\n * @param {Uint8Array} data\n * @param {number} pos\n * @param {number} _minor\n * @param {DecodeOptions} options\n * @returns {Token}\n */\nexport function decodeBytes64(data, pos, _minor, options) {\n  const l = uint.readUint64(data, pos + 1, options);\n  if (typeof l === 'bigint') {\n    throw new Error(`${decodeErrPrefix} 64-bit integer bytes lengths not supported`);\n  }\n  return toToken(data, pos, 9, l);\n}\n\n/**\n * `encodedBytes` allows for caching when we do a byte version of a string\n * for key sorting purposes\n * @param {Token} token\n * @returns {Uint8Array}\n */\nfunction tokenBytes(token) {\n  if (token.encodedBytes === undefined) {\n    token.encodedBytes = token.type === Type.string ? fromString(token.value) : token.value;\n  }\n  // @ts-ignore c'mon\n  return token.encodedBytes;\n}\n\n/**\n * @param {Bl} buf\n * @param {Token} token\n */\nexport function encodeBytes(buf, token) {\n  const bytes = tokenBytes(token);\n  uint.encodeUintValue(buf, token.type.majorEncoded, bytes.length);\n  buf.push(bytes);\n}\n\n/**\n * @param {Token} token\n * @returns {number}\n */\nencodeBytes.encodedSize = function encodedSize(token) {\n  const bytes = tokenBytes(token);\n  return uint.encodeUintValue.encodedSize(bytes.length) + bytes.length;\n};\n\n/**\n * @param {Token} tok1\n * @param {Token} tok2\n * @returns {number}\n */\nencodeBytes.compareTokens = function compareTokens(tok1, tok2) {\n  return compareBytes(tokenBytes(tok1), tokenBytes(tok2));\n};\n\n/**\n * @param {Uint8Array} b1\n * @param {Uint8Array} b2\n * @returns {number}\n */\nexport function compareBytes(b1, b2) {\n  return b1.length < b2.length ? -1 : b1.length > b2.length ? 1 : compare(b1, b2);\n}","map":{"version":3,"names":["Token","Type","assertEnoughData","decodeErrPrefix","uint","compare","fromString","slice","toToken","data","pos","prefix","length","buf","bytes","decodeBytesCompact","minor","_options","decodeBytes8","_minor","options","readUint8","decodeBytes16","readUint16","decodeBytes32","readUint32","decodeBytes64","l","readUint64","Error","tokenBytes","token","encodedBytes","undefined","type","string","value","encodeBytes","encodeUintValue","majorEncoded","push","encodedSize","compareTokens","tok1","tok2","compareBytes","b1","b2"],"sources":["/Users/yezery/OASIS/OASIS_Interface/node_modules/.store/cborg@4.0.3/node_modules/cborg/lib/2bytes.js"],"sourcesContent":["import { Token, Type } from './token.js'\nimport { assertEnoughData, decodeErrPrefix } from './common.js'\nimport * as uint from './0uint.js'\nimport { compare, fromString, slice } from './byte-utils.js'\n\n/**\n * @typedef {import('./bl.js').Bl} Bl\n * @typedef {import('../interface').DecodeOptions} DecodeOptions\n */\n\n/**\n * @param {Uint8Array} data\n * @param {number} pos\n * @param {number} prefix\n * @param {number} length\n * @returns {Token}\n */\nfunction toToken (data, pos, prefix, length) {\n  assertEnoughData(data, pos, prefix + length)\n  const buf = slice(data, pos + prefix, pos + prefix + length)\n  return new Token(Type.bytes, buf, prefix + length)\n}\n\n/**\n * @param {Uint8Array} data\n * @param {number} pos\n * @param {number} minor\n * @param {DecodeOptions} _options\n * @returns {Token}\n */\nexport function decodeBytesCompact (data, pos, minor, _options) {\n  return toToken(data, pos, 1, minor)\n}\n\n/**\n * @param {Uint8Array} data\n * @param {number} pos\n * @param {number} _minor\n * @param {DecodeOptions} options\n * @returns {Token}\n */\nexport function decodeBytes8 (data, pos, _minor, options) {\n  return toToken(data, pos, 2, uint.readUint8(data, pos + 1, options))\n}\n\n/**\n * @param {Uint8Array} data\n * @param {number} pos\n * @param {number} _minor\n * @param {DecodeOptions} options\n * @returns {Token}\n */\nexport function decodeBytes16 (data, pos, _minor, options) {\n  return toToken(data, pos, 3, uint.readUint16(data, pos + 1, options))\n}\n\n/**\n * @param {Uint8Array} data\n * @param {number} pos\n * @param {number} _minor\n * @param {DecodeOptions} options\n * @returns {Token}\n */\nexport function decodeBytes32 (data, pos, _minor, options) {\n  return toToken(data, pos, 5, uint.readUint32(data, pos + 1, options))\n}\n\n// TODO: maybe we shouldn't support this ..\n/**\n * @param {Uint8Array} data\n * @param {number} pos\n * @param {number} _minor\n * @param {DecodeOptions} options\n * @returns {Token}\n */\nexport function decodeBytes64 (data, pos, _minor, options) {\n  const l = uint.readUint64(data, pos + 1, options)\n  if (typeof l === 'bigint') {\n    throw new Error(`${decodeErrPrefix} 64-bit integer bytes lengths not supported`)\n  }\n  return toToken(data, pos, 9, l)\n}\n\n/**\n * `encodedBytes` allows for caching when we do a byte version of a string\n * for key sorting purposes\n * @param {Token} token\n * @returns {Uint8Array}\n */\nfunction tokenBytes (token) {\n  if (token.encodedBytes === undefined) {\n    token.encodedBytes = token.type === Type.string ? fromString(token.value) : token.value\n  }\n  // @ts-ignore c'mon\n  return token.encodedBytes\n}\n\n/**\n * @param {Bl} buf\n * @param {Token} token\n */\nexport function encodeBytes (buf, token) {\n  const bytes = tokenBytes(token)\n  uint.encodeUintValue(buf, token.type.majorEncoded, bytes.length)\n  buf.push(bytes)\n}\n\n/**\n * @param {Token} token\n * @returns {number}\n */\nencodeBytes.encodedSize = function encodedSize (token) {\n  const bytes = tokenBytes(token)\n  return uint.encodeUintValue.encodedSize(bytes.length) + bytes.length\n}\n\n/**\n * @param {Token} tok1\n * @param {Token} tok2\n * @returns {number}\n */\nencodeBytes.compareTokens = function compareTokens (tok1, tok2) {\n  return compareBytes(tokenBytes(tok1), tokenBytes(tok2))\n}\n\n/**\n * @param {Uint8Array} b1\n * @param {Uint8Array} b2\n * @returns {number}\n */\nexport function compareBytes (b1, b2) {\n  return b1.length < b2.length ? -1 : b1.length > b2.length ? 1 : compare(b1, b2)\n}\n"],"mappings":";AAAA,SAASA,KAAK,EAAEC,IAAI,QAAQ,YAAY;AACxC,SAASC,gBAAgB,EAAEC,eAAe,QAAQ,aAAa;AAC/D,OAAO,KAAKC,IAAI,MAAM,YAAY;AAClC,SAASC,OAAO,EAAEC,UAAU,EAAEC,KAAK,QAAQ,iBAAiB;;AAE5D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,OAAOA,CAAEC,IAAI,EAAEC,GAAG,EAAEC,MAAM,EAAEC,MAAM,EAAE;EAC3CV,gBAAgB,CAACO,IAAI,EAAEC,GAAG,EAAEC,MAAM,GAAGC,MAAM,CAAC;EAC5C,MAAMC,GAAG,GAAGN,KAAK,CAACE,IAAI,EAAEC,GAAG,GAAGC,MAAM,EAAED,GAAG,GAAGC,MAAM,GAAGC,MAAM,CAAC;EAC5D,OAAO,IAAIZ,KAAK,CAACC,IAAI,CAACa,KAAK,EAAED,GAAG,EAAEF,MAAM,GAAGC,MAAM,CAAC;AACpD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASG,kBAAkBA,CAAEN,IAAI,EAAEC,GAAG,EAAEM,KAAK,EAAEC,QAAQ,EAAE;EAC9D,OAAOT,OAAO,CAACC,IAAI,EAAEC,GAAG,EAAE,CAAC,EAAEM,KAAK,CAAC;AACrC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASE,YAAYA,CAAET,IAAI,EAAEC,GAAG,EAAES,MAAM,EAAEC,OAAO,EAAE;EACxD,OAAOZ,OAAO,CAACC,IAAI,EAAEC,GAAG,EAAE,CAAC,EAAEN,IAAI,CAACiB,SAAS,CAACZ,IAAI,EAAEC,GAAG,GAAG,CAAC,EAAEU,OAAO,CAAC,CAAC;AACtE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASE,aAAaA,CAAEb,IAAI,EAAEC,GAAG,EAAES,MAAM,EAAEC,OAAO,EAAE;EACzD,OAAOZ,OAAO,CAACC,IAAI,EAAEC,GAAG,EAAE,CAAC,EAAEN,IAAI,CAACmB,UAAU,CAACd,IAAI,EAAEC,GAAG,GAAG,CAAC,EAAEU,OAAO,CAAC,CAAC;AACvE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASI,aAAaA,CAAEf,IAAI,EAAEC,GAAG,EAAES,MAAM,EAAEC,OAAO,EAAE;EACzD,OAAOZ,OAAO,CAACC,IAAI,EAAEC,GAAG,EAAE,CAAC,EAAEN,IAAI,CAACqB,UAAU,CAAChB,IAAI,EAAEC,GAAG,GAAG,CAAC,EAAEU,OAAO,CAAC,CAAC;AACvE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASM,aAAaA,CAAEjB,IAAI,EAAEC,GAAG,EAAES,MAAM,EAAEC,OAAO,EAAE;EACzD,MAAMO,CAAC,GAAGvB,IAAI,CAACwB,UAAU,CAACnB,IAAI,EAAEC,GAAG,GAAG,CAAC,EAAEU,OAAO,CAAC;EACjD,IAAI,OAAOO,CAAC,KAAK,QAAQ,EAAE;IACzB,MAAM,IAAIE,KAAK,CAAE,GAAE1B,eAAgB,6CAA4C,CAAC;EAClF;EACA,OAAOK,OAAO,CAACC,IAAI,EAAEC,GAAG,EAAE,CAAC,EAAEiB,CAAC,CAAC;AACjC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAASG,UAAUA,CAAEC,KAAK,EAAE;EAC1B,IAAIA,KAAK,CAACC,YAAY,KAAKC,SAAS,EAAE;IACpCF,KAAK,CAACC,YAAY,GAAGD,KAAK,CAACG,IAAI,KAAKjC,IAAI,CAACkC,MAAM,GAAG7B,UAAU,CAACyB,KAAK,CAACK,KAAK,CAAC,GAAGL,KAAK,CAACK,KAAK;EACzF;EACA;EACA,OAAOL,KAAK,CAACC,YAAY;AAC3B;;AAEA;AACA;AACA;AACA;AACA,OAAO,SAASK,WAAWA,CAAExB,GAAG,EAAEkB,KAAK,EAAE;EACvC,MAAMjB,KAAK,GAAGgB,UAAU,CAACC,KAAK,CAAC;EAC/B3B,IAAI,CAACkC,eAAe,CAACzB,GAAG,EAAEkB,KAAK,CAACG,IAAI,CAACK,YAAY,EAAEzB,KAAK,CAACF,MAAM,CAAC;EAChEC,GAAG,CAAC2B,IAAI,CAAC1B,KAAK,CAAC;AACjB;;AAEA;AACA;AACA;AACA;AACAuB,WAAW,CAACI,WAAW,GAAG,SAASA,WAAWA,CAAEV,KAAK,EAAE;EACrD,MAAMjB,KAAK,GAAGgB,UAAU,CAACC,KAAK,CAAC;EAC/B,OAAO3B,IAAI,CAACkC,eAAe,CAACG,WAAW,CAAC3B,KAAK,CAACF,MAAM,CAAC,GAAGE,KAAK,CAACF,MAAM;AACtE,CAAC;;AAED;AACA;AACA;AACA;AACA;AACAyB,WAAW,CAACK,aAAa,GAAG,SAASA,aAAaA,CAAEC,IAAI,EAAEC,IAAI,EAAE;EAC9D,OAAOC,YAAY,CAACf,UAAU,CAACa,IAAI,CAAC,EAAEb,UAAU,CAACc,IAAI,CAAC,CAAC;AACzD,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,YAAYA,CAAEC,EAAE,EAAEC,EAAE,EAAE;EACpC,OAAOD,EAAE,CAAClC,MAAM,GAAGmC,EAAE,CAACnC,MAAM,GAAG,CAAC,CAAC,GAAGkC,EAAE,CAAClC,MAAM,GAAGmC,EAAE,CAACnC,MAAM,GAAG,CAAC,GAAGP,OAAO,CAACyC,EAAE,EAAEC,EAAE,CAAC;AACjF"},"metadata":{},"sourceType":"module","externalDependencies":[]}