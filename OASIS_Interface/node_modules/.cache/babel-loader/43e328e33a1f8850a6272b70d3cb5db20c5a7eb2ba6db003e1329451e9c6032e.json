{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/**\n * Takes an (async) iterable that emits things and returns an async iterable that\n * emits those things in fixed-sized batches\n */\nexport default async function* batch(source, size = 1) {\n  let things = [];\n  if (size < 1) {\n    size = 1;\n  }\n  for await (const thing of source) {\n    things.push(thing);\n    while (things.length >= size) {\n      yield things.slice(0, size);\n      things = things.slice(size);\n    }\n  }\n  while (things.length > 0) {\n    yield things.slice(0, size);\n    things = things.slice(size);\n  }\n}","map":{"version":3,"names":["batch","source","size","things","thing","push","length","slice"],"sources":["../../src/index.ts"],"sourcesContent":[null],"mappings":";AAAA;;;;AAIA,eAAe,gBAAiBA,KAAKA,CAAMC,MAAsC,EAAEC,IAAA,GAAe,CAAC;EACjG,IAAIC,MAAM,GAAQ,EAAE;EAEpB,IAAID,IAAI,GAAG,CAAC,EAAE;IACZA,IAAI,GAAG,CAAC;;EAGV,WAAW,MAAME,KAAK,IAAIH,MAAM,EAAE;IAChCE,MAAM,CAACE,IAAI,CAACD,KAAK,CAAC;IAElB,OAAOD,MAAM,CAACG,MAAM,IAAIJ,IAAI,EAAE;MAC5B,MAAMC,MAAM,CAACI,KAAK,CAAC,CAAC,EAAEL,IAAI,CAAC;MAE3BC,MAAM,GAAGA,MAAM,CAACI,KAAK,CAACL,IAAI,CAAC;;;EAI/B,OAAOC,MAAM,CAACG,MAAM,GAAG,CAAC,EAAE;IACxB,MAAMH,MAAM,CAACI,KAAK,CAAC,CAAC,EAAEL,IAAI,CAAC;IAE3BC,MAAM,GAAGA,MAAM,CAACI,KAAK,CAACL,IAAI,CAAC;;AAE/B"},"metadata":{},"sourceType":"module","externalDependencies":[]}