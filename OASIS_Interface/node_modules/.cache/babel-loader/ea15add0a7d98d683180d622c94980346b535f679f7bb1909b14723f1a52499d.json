{"ast":null,"code":"import _defineProperty from \"/Users/yezery/Oasis/OASIS/node_modules/.store/@babel+runtime@7.22.15/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nclass TrackedMap extends Map {\n  constructor(init) {\n    super();\n    _defineProperty(this, \"metric\", void 0);\n    const {\n      name,\n      metrics\n    } = init;\n    this.metric = metrics.registerMetric(name);\n    this.updateComponentMetric();\n  }\n  set(key, value) {\n    super.set(key, value);\n    this.updateComponentMetric();\n    return this;\n  }\n  delete(key) {\n    const deleted = super.delete(key);\n    this.updateComponentMetric();\n    return deleted;\n  }\n  clear() {\n    super.clear();\n    this.updateComponentMetric();\n  }\n  updateComponentMetric() {\n    this.metric.update(this.size);\n  }\n}\nexport function trackedMap(config) {\n  const {\n    name,\n    metrics\n  } = config;\n  let map;\n  if (metrics != null) {\n    map = new TrackedMap({\n      name,\n      metrics\n    });\n  } else {\n    map = new Map();\n  }\n  return map;\n}","map":{"version":3,"names":["TrackedMap","Map","constructor","init","_defineProperty","name","metrics","metric","registerMetric","updateComponentMetric","set","key","value","delete","deleted","clear","update","size","trackedMap","config","map"],"sources":["../../src/index.ts"],"sourcesContent":[null],"mappings":";AAOA,MAAMA,UAAiB,SAAQC,GAAS;EAGtCC,YAAaC,IAAoB;IAC/B,KAAK,EAAE;IAAAC,eAAA;IAEP,MAAM;MAAEC,IAAI;MAAEC;IAAO,CAAE,GAAGH,IAAI;IAE9B,IAAI,CAACI,MAAM,GAAGD,OAAO,CAACE,cAAc,CAACH,IAAI,CAAC;IAC1C,IAAI,CAACI,qBAAqB,EAAE;EAC9B;EAEAC,GAAGA,CAAEC,GAAM,EAAEC,KAAQ;IACnB,KAAK,CAACF,GAAG,CAACC,GAAG,EAAEC,KAAK,CAAC;IACrB,IAAI,CAACH,qBAAqB,EAAE;IAC5B,OAAO,IAAI;EACb;EAEAI,MAAMA,CAAEF,GAAM;IACZ,MAAMG,OAAO,GAAG,KAAK,CAACD,MAAM,CAACF,GAAG,CAAC;IACjC,IAAI,CAACF,qBAAqB,EAAE;IAC5B,OAAOK,OAAO;EAChB;EAEAC,KAAKA,CAAA;IACH,KAAK,CAACA,KAAK,EAAE;IACb,IAAI,CAACN,qBAAqB,EAAE;EAC9B;EAEQA,qBAAqBA,CAAA;IAC3B,IAAI,CAACF,MAAM,CAACS,MAAM,CAAC,IAAI,CAACC,IAAI,CAAC;EAC/B;;AAeF,OAAM,SAAUC,UAAUA,CAASC,MAA4B;EAC7D,MAAM;IAAEd,IAAI;IAAEC;EAAO,CAAE,GAAGa,MAAM;EAChC,IAAIC,GAAc;EAElB,IAAId,OAAO,IAAI,IAAI,EAAE;IACnBc,GAAG,GAAG,IAAIpB,UAAU,CAAO;MAAEK,IAAI;MAAEC;IAAO,CAAE,CAAC;GAC9C,MAAM;IACLc,GAAG,GAAG,IAAInB,GAAG,EAAQ;;EAGvB,OAAOmB,GAAG;AACZ"},"metadata":{},"sourceType":"module","externalDependencies":[]}