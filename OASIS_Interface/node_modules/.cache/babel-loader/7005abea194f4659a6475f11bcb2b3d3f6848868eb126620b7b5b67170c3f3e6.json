{"ast":null,"code":"/**\n * Exclude up to `ineed` items from a set if item meets condition `cond`\n */\nexport function removeItemsFromSet(superSet, ineed, cond = () => true) {\n  const subset = new Set();\n  if (ineed <= 0) return subset;\n  for (const id of superSet) {\n    if (subset.size >= ineed) break;\n    if (cond(id)) {\n      subset.add(id);\n      superSet.delete(id);\n    }\n  }\n  return subset;\n}\n/**\n * Exclude up to `ineed` items from a set\n */\nexport function removeFirstNItemsFromSet(superSet, ineed) {\n  return removeItemsFromSet(superSet, ineed, () => true);\n}\nexport class MapDef extends Map {\n  constructor(getDefault) {\n    super();\n    this.getDefault = getDefault;\n  }\n  getOrDefault(key) {\n    let value = super.get(key);\n    if (value === undefined) {\n      value = this.getDefault();\n      this.set(key, value);\n    }\n    return value;\n  }\n}","map":{"version":3,"names":["removeItemsFromSet","superSet","ineed","cond","subset","Set","id","size","add","delete","removeFirstNItemsFromSet","MapDef","Map","constructor","getDefault","getOrDefault","key","value","get","undefined","set"],"sources":["../../../src/utils/set.ts"],"sourcesContent":[null],"mappings":"AAAA;;;AAGA,OAAM,SAAUA,kBAAkBA,CAChCC,QAAgB,EAChBC,KAAa,EACbC,IAAA,GAA6BA,CAAA,KAAM,IAAI;EAEvC,MAAMC,MAAM,GAAG,IAAIC,GAAG,EAAK;EAC3B,IAAIH,KAAK,IAAI,CAAC,EAAE,OAAOE,MAAM;EAE7B,KAAK,MAAME,EAAE,IAAIL,QAAQ,EAAE;IACzB,IAAIG,MAAM,CAACG,IAAI,IAAIL,KAAK,EAAE;IAC1B,IAAIC,IAAI,CAACG,EAAE,CAAC,EAAE;MACZF,MAAM,CAACI,GAAG,CAACF,EAAE,CAAC;MACdL,QAAQ,CAACQ,MAAM,CAACH,EAAE,CAAC;;;EAIvB,OAAOF,MAAM;AACf;AAEA;;;AAGA,OAAM,SAAUM,wBAAwBA,CAAIT,QAAgB,EAAEC,KAAa;EACzE,OAAOF,kBAAkB,CAACC,QAAQ,EAAEC,KAAK,EAAE,MAAM,IAAI,CAAC;AACxD;AAEA,OAAM,MAAOS,MAAa,SAAQC,GAAS;EACzCC,YAA6BC,UAAmB;IAC9C,KAAK,EAAE;IADoB,KAAAA,UAAU,GAAVA,UAAU;EAEvC;EAEAC,YAAYA,CAACC,GAAM;IACjB,IAAIC,KAAK,GAAG,KAAK,CAACC,GAAG,CAACF,GAAG,CAAC;IAC1B,IAAIC,KAAK,KAAKE,SAAS,EAAE;MACvBF,KAAK,GAAG,IAAI,CAACH,UAAU,EAAE;MACzB,IAAI,CAACM,GAAG,CAACJ,GAAG,EAAEC,KAAK,CAAC;;IAEtB,OAAOA,KAAK;EACd"},"metadata":{},"sourceType":"module","externalDependencies":[]}