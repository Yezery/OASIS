{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.array.push.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nclass EventQueue {\n  constructor() {\n    this.pullQueue = [];\n    this.pushQueue = [];\n    this.eventHandlers = {};\n    this.isPaused = false;\n    this.isStopped = false;\n  }\n  push(value) {\n    if (this.isStopped) return;\n    const resolution = {\n      value,\n      done: false\n    };\n    if (this.pullQueue.length) {\n      const placeholder = this.pullQueue.shift();\n      if (placeholder) placeholder.resolve(resolution);\n    } else {\n      this.pushQueue.push(Promise.resolve(resolution));\n      if (this.highWaterMark !== undefined && this.pushQueue.length >= this.highWaterMark && !this.isPaused) {\n        this.isPaused = true;\n        if (this.eventHandlers.highWater) {\n          this.eventHandlers.highWater();\n        } else if (console) {\n          console.warn(`EventIterator queue reached ${this.pushQueue.length} items`);\n        }\n      }\n    }\n  }\n  stop() {\n    if (this.isStopped) return;\n    this.isStopped = true;\n    this.remove();\n    for (const placeholder of this.pullQueue) {\n      placeholder.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this.pullQueue.length = 0;\n  }\n  fail(error) {\n    if (this.isStopped) return;\n    this.isStopped = true;\n    this.remove();\n    if (this.pullQueue.length) {\n      for (const placeholder of this.pullQueue) {\n        placeholder.reject(error);\n      }\n      this.pullQueue.length = 0;\n    } else {\n      const rejection = Promise.reject(error);\n      /* Attach error handler to avoid leaking an unhandled promise rejection. */\n      rejection.catch(() => {});\n      this.pushQueue.push(rejection);\n    }\n  }\n  remove() {\n    Promise.resolve().then(() => {\n      if (this.removeCallback) this.removeCallback();\n    });\n  }\n  [Symbol.asyncIterator]() {\n    return {\n      next: value => {\n        const result = this.pushQueue.shift();\n        if (result) {\n          if (this.lowWaterMark !== undefined && this.pushQueue.length <= this.lowWaterMark && this.isPaused) {\n            this.isPaused = false;\n            if (this.eventHandlers.lowWater) {\n              this.eventHandlers.lowWater();\n            }\n          }\n          return result;\n        } else if (this.isStopped) {\n          return Promise.resolve({\n            value: undefined,\n            done: true\n          });\n        } else {\n          return new Promise((resolve, reject) => {\n            this.pullQueue.push({\n              resolve,\n              reject\n            });\n          });\n        }\n      },\n      return: () => {\n        this.isStopped = true;\n        this.pushQueue.length = 0;\n        this.remove();\n        return Promise.resolve({\n          value: undefined,\n          done: true\n        });\n      }\n    };\n  }\n}\nclass EventIterator {\n  constructor(listen, {\n    highWaterMark = 100,\n    lowWaterMark = 1\n  } = {}) {\n    const queue = new EventQueue();\n    queue.highWaterMark = highWaterMark;\n    queue.lowWaterMark = lowWaterMark;\n    queue.removeCallback = listen({\n      push: value => queue.push(value),\n      stop: () => queue.stop(),\n      fail: error => queue.fail(error),\n      on: (event, fn) => {\n        queue.eventHandlers[event] = fn;\n      }\n    }) || (() => {});\n    this[Symbol.asyncIterator] = () => queue[Symbol.asyncIterator]();\n    Object.freeze(this);\n  }\n}\nexports.EventIterator = EventIterator;\nexports.default = EventIterator;","map":{"version":3,"names":["require","Object","defineProperty","exports","value","EventQueue","constructor","pullQueue","pushQueue","eventHandlers","isPaused","isStopped","push","resolution","done","length","placeholder","shift","resolve","Promise","highWaterMark","undefined","highWater","console","warn","stop","remove","fail","error","reject","rejection","catch","then","removeCallback","Symbol","asyncIterator","next","result","lowWaterMark","lowWater","return","EventIterator","listen","queue","on","event","fn","freeze","default"],"sources":["/Users/yezery/Oasis/OASIS/node_modules/.store/event-iterator@2.0.0/node_modules/event-iterator/lib/event-iterator.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass EventQueue {\n    constructor() {\n        this.pullQueue = [];\n        this.pushQueue = [];\n        this.eventHandlers = {};\n        this.isPaused = false;\n        this.isStopped = false;\n    }\n    push(value) {\n        if (this.isStopped)\n            return;\n        const resolution = { value, done: false };\n        if (this.pullQueue.length) {\n            const placeholder = this.pullQueue.shift();\n            if (placeholder)\n                placeholder.resolve(resolution);\n        }\n        else {\n            this.pushQueue.push(Promise.resolve(resolution));\n            if (this.highWaterMark !== undefined &&\n                this.pushQueue.length >= this.highWaterMark &&\n                !this.isPaused) {\n                this.isPaused = true;\n                if (this.eventHandlers.highWater) {\n                    this.eventHandlers.highWater();\n                }\n                else if (console) {\n                    console.warn(`EventIterator queue reached ${this.pushQueue.length} items`);\n                }\n            }\n        }\n    }\n    stop() {\n        if (this.isStopped)\n            return;\n        this.isStopped = true;\n        this.remove();\n        for (const placeholder of this.pullQueue) {\n            placeholder.resolve({ value: undefined, done: true });\n        }\n        this.pullQueue.length = 0;\n    }\n    fail(error) {\n        if (this.isStopped)\n            return;\n        this.isStopped = true;\n        this.remove();\n        if (this.pullQueue.length) {\n            for (const placeholder of this.pullQueue) {\n                placeholder.reject(error);\n            }\n            this.pullQueue.length = 0;\n        }\n        else {\n            const rejection = Promise.reject(error);\n            /* Attach error handler to avoid leaking an unhandled promise rejection. */\n            rejection.catch(() => { });\n            this.pushQueue.push(rejection);\n        }\n    }\n    remove() {\n        Promise.resolve().then(() => {\n            if (this.removeCallback)\n                this.removeCallback();\n        });\n    }\n    [Symbol.asyncIterator]() {\n        return {\n            next: (value) => {\n                const result = this.pushQueue.shift();\n                if (result) {\n                    if (this.lowWaterMark !== undefined &&\n                        this.pushQueue.length <= this.lowWaterMark &&\n                        this.isPaused) {\n                        this.isPaused = false;\n                        if (this.eventHandlers.lowWater) {\n                            this.eventHandlers.lowWater();\n                        }\n                    }\n                    return result;\n                }\n                else if (this.isStopped) {\n                    return Promise.resolve({ value: undefined, done: true });\n                }\n                else {\n                    return new Promise((resolve, reject) => {\n                        this.pullQueue.push({ resolve, reject });\n                    });\n                }\n            },\n            return: () => {\n                this.isStopped = true;\n                this.pushQueue.length = 0;\n                this.remove();\n                return Promise.resolve({ value: undefined, done: true });\n            },\n        };\n    }\n}\nclass EventIterator {\n    constructor(listen, { highWaterMark = 100, lowWaterMark = 1 } = {}) {\n        const queue = new EventQueue();\n        queue.highWaterMark = highWaterMark;\n        queue.lowWaterMark = lowWaterMark;\n        queue.removeCallback =\n            listen({\n                push: value => queue.push(value),\n                stop: () => queue.stop(),\n                fail: error => queue.fail(error),\n                on: (event, fn) => {\n                    queue.eventHandlers[event] = fn;\n                },\n            }) || (() => { });\n        this[Symbol.asyncIterator] = () => queue[Symbol.asyncIterator]();\n        Object.freeze(this);\n    }\n}\nexports.EventIterator = EventIterator;\nexports.default = EventIterator;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}