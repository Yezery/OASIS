{"ast":null,"code":"import request from \"@/utils/axiosRequest\";\nimport store from '@/store';\nimport { create } from \"ipfs-http-client\";\nimport Web3 from 'web3';\nimport { updateSaleactive, insertSale } from \"./Sale\";\nimport { postOwnerContractList } from \"./ownerContractLIst\";\nimport { mintNFTContractABI, mintNFTContractBytecode, marketContractAddress, marketContractABI, ipfsBaseURI, ipfsPeerAddress, ipfsPublicGatewayUrl, rpcUrl } from \"@/contract/Contract\";\n//  IPFS的根URL\nconst baseURL = ipfsBaseURI();\n//  铸币合约ABI\nconst MintNFTContractABI = mintNFTContractABI();\n//  铸币合约ByteCode\nconst MintNFTContractBytecode = mintNFTContractBytecode();\n//  市场合约地址\nconst MarketContractAddress = marketContractAddress();\n//  市场合约ABI\nconst MarketContractABI = marketContractABI();\n// 指定其他节点的 IP 和端口\nconst peerAddress = ipfsPeerAddress();\n//  IPFS网关\nconst publicGatewayUrl = ipfsPublicGatewayUrl();\n\n//====================  部署铸造NFT合约，返回NFT合约实例 \nasync function deployNFTContract(Name, Symbol, Maxmums) {\n  let contract = new store.state.Web3.eth.Contract(MintNFTContractABI);\n  //  部署合约\n  let NewNFTContractAddress = await contract.deploy({\n    data: MintNFTContractBytecode,\n    arguments: [Name, Symbol, publicGatewayUrl, Maxmums]\n  }).send({\n    from: store.state.currentAddress\n  });\n  console.log(NewNFTContractAddress._address);\n  //  通过部署合约返回的合约地址，与合约ABI产生合约实例\n  let NFTContract = await new store.state.Web3.eth.Contract(MintNFTContractABI, NewNFTContractAddress._address);\n  return NFTContract;\n}\n//====================  保存到IPFS，返回IPFS哈希值\nasync function savetoIPFS(uploadFiles) {\n  try {\n    if (uploadFiles.length != 0) {\n      //ipfs的add方法是将东西添加到ipfs网络上\n      let results = await create({\n        host: \"10.39.5.194\",\n        port: \"5001\",\n        protocol: \"http\"\n      }).add(uploadFiles[0].raw, {\n        remote: true,\n        pin: true\n      });\n      return results.path;\n    }\n  } catch (err) {\n    console.error(err);\n    return null;\n  }\n}\n\n// async function mintNFT(NFTContract, Name, Symbol, nftName,description,uploadFiles) {\nasync function mintNFT(NFTContract, name, symbol, maxmums, NFTName, description, uploadFiles) {\n  let nftCount = 0;\n  let ipfsHash = await savetoIPFS(uploadFiles);\n  let ipfsPath = `ipfs/${ipfsHash}?filename=${NFTName}`;\n  if (ipfsHash != null) {\n    try {\n      await NFTContract.methods._currentId().call().then(re => {\n        nftCount = re;\n      });\n    } catch (error) {\n      console.log(error);\n      console.log(NFTContract.methods);\n    }\n    await NFTContract.methods.mint(NFTName, description, ipfsHash).send({\n      from: store.state.currentAddress\n    });\n    // // ====================  信息存储到数据库中\n    await request({\n      url: '/createNFT',\n      method: 'post',\n      data: {\n        \"ownerAddress\": store.state.currentAddress,\n        \"nftAddress\": NFTContract._address,\n        \"ipfsPath\": `${publicGatewayUrl}${ipfsPath}`,\n        \"isActive\": false,\n        \"price\": \"0\",\n        \"name\": name,\n        \"symbol\": symbol,\n        \"nftName\": NFTName,\n        \"maxmums\": Number(maxmums),\n        \"description\": description,\n        \"tokenId\": Number(nftCount)\n      }\n    }).then(res => {\n      if (res.status == 200) {\n        // postOwnerContractList({ ownerAddress: store.state.currentAddress }).then((re) => {\n        //   store.commit(\"setOwnerNFTList\", re.data.data);\n        // });\n        // return\n      } else {\n        return;\n      }\n    });\n  }\n}\n\n//====================  生成NFT合约实例\nexport async function getNFTStruct(nftAddress) {\n  return await new store.state.Web3.eth.Contract(MintNFTContractABI, nftAddress);\n}\n\n//==================== NFT总控\nexport async function MakeNFT(Name, Symbol, uploadFiles, Maxmums, FirstNFTName, Description) {\n  console.log(\"部署合约\");\n  const NFTContract = await deployNFTContract(Name, Symbol, Maxmums);\n  console.log(\"铸造\");\n  await mintNFT(NFTContract, Name, Symbol, Maxmums, FirstNFTName, Description, uploadFiles);\n}\n//====================  市场合约\nlet MarketContract;\nlet marketUseWeb3;\n// 实例化市场合约\nif (window.ethereum != undefined) {\n  marketUseWeb3 = new Web3(window.ethereum);\n} else {\n  marketUseWeb3 = new Web3(rpcUrl());\n}\nconsole.log();\nMarketContract = new marketUseWeb3.eth.Contract(MarketContractABI, MarketContractAddress);\n//====================  上架NFT\nexport async function getSaleList() {\n  let SaleList = [];\n  try {\n    await MarketContract.methods.getSales().call().then(re => {\n      SaleList = re;\n    });\n  } catch (error) {\n    console.log(error);\n  }\n  return SaleList;\n}\nexport async function UpSale(NFT) {\n  console.log(NFT);\n  //授权\n  let NFTContract = await new store.state.Web3.eth.Contract(MintNFTContractABI, NFT.nftAddress);\n  await NFTContract.methods.approve(MarketContractAddress, NFT.tokenId).send({\n    from: store.state.currentAddress\n  });\n  await MarketContract.methods.createSale(NFT.nftAddress, NFT.tokenId, store.state.Web3.utils.toWei(NFT.price, 'ether'), \"\").send({\n    from: store.state.currentAddress\n  });\n  let SaleId;\n  await MarketContract.methods.SaleId().call().then(re => {\n    SaleId = re;\n  });\n  var Sale = {\n    saleId: Number(SaleId),\n    NFT: NFT\n  };\n  // await updateSaleactive(NFT)\n  await insertSale(Sale);\n}\nexport async function Buy(NFT) {\n  // console.log(MarketContract);\n  console.log(NFT);\n  // console.log(NFT.saleId);\n  if (!store.state.Web3) {\n    alert(\"请登录\");\n    return;\n  }\n  console.log(NFT.price);\n  await MarketContract.methods.buy(NFT.saleId).send({\n    from: store.state.currentAddress,\n    value: store.state.Web3.utils.toWei(NFT.price, 'ether')\n  });\n}\nexport async function getFeePercentage() {\n  let FeePercentage;\n  await MarketContract.methods.feePercentage().call().then(re => {\n    FeePercentage = re;\n  });\n  return FeePercentage;\n}","map":{"version":3,"names":["request","store","create","Web3","updateSaleactive","insertSale","postOwnerContractList","mintNFTContractABI","mintNFTContractBytecode","marketContractAddress","marketContractABI","ipfsBaseURI","ipfsPeerAddress","ipfsPublicGatewayUrl","rpcUrl","baseURL","MintNFTContractABI","MintNFTContractBytecode","MarketContractAddress","MarketContractABI","peerAddress","publicGatewayUrl","deployNFTContract","Name","Symbol","Maxmums","contract","state","eth","Contract","NewNFTContractAddress","deploy","data","arguments","send","from","currentAddress","console","log","_address","NFTContract","savetoIPFS","uploadFiles","length","results","host","port","protocol","add","raw","remote","pin","path","err","error","mintNFT","name","symbol","maxmums","NFTName","description","nftCount","ipfsHash","ipfsPath","methods","_currentId","call","then","re","mint","url","method","Number","res","status","getNFTStruct","nftAddress","MakeNFT","FirstNFTName","Description","MarketContract","marketUseWeb3","window","ethereum","undefined","getSaleList","SaleList","getSales","UpSale","NFT","approve","tokenId","createSale","utils","toWei","price","SaleId","Sale","saleId","Buy","alert","buy","value","getFeePercentage","FeePercentage","feePercentage"],"sources":["/Users/yezery/Oasis/OASIS/src/api/axios/contract.js"],"sourcesContent":["import request from \"@/utils/axiosRequest\"\nimport store from '@/store';\nimport { create } from \"ipfs-http-client\"\nimport Web3 from 'web3'\nimport { updateSaleactive, insertSale } from \"./Sale\"\nimport { postOwnerContractList } from \"./ownerContractLIst\";\nimport { mintNFTContractABI, mintNFTContractBytecode, marketContractAddress, marketContractABI, ipfsBaseURI, ipfsPeerAddress, ipfsPublicGatewayUrl, rpcUrl } from \"@/contract/Contract\"\n//  IPFS的根URL\nconst baseURL = ipfsBaseURI();\n//  铸币合约ABI\nconst MintNFTContractABI = mintNFTContractABI()\n//  铸币合约ByteCode\nconst MintNFTContractBytecode = mintNFTContractBytecode()\n//  市场合约地址\nconst MarketContractAddress = marketContractAddress();\n//  市场合约ABI\nconst MarketContractABI = marketContractABI();\n// 指定其他节点的 IP 和端口\nconst peerAddress = ipfsPeerAddress()\n//  IPFS网关\nconst publicGatewayUrl = ipfsPublicGatewayUrl();\n\n\n//====================  部署铸造NFT合约，返回NFT合约实例 \nasync function deployNFTContract(Name, Symbol, Maxmums) {\n  let contract = new store.state.Web3.eth.Contract(MintNFTContractABI);\n  //  部署合约\n  let NewNFTContractAddress = await contract.deploy({ data: MintNFTContractBytecode, arguments: [Name, Symbol, publicGatewayUrl, Maxmums] })\n    .send({\n      from: store.state.currentAddress\n    });\n  console.log(NewNFTContractAddress._address);\n  //  通过部署合约返回的合约地址，与合约ABI产生合约实例\n  let NFTContract = await new store.state.Web3.eth.Contract(MintNFTContractABI, NewNFTContractAddress._address);\n  return NFTContract;\n}\n//====================  保存到IPFS，返回IPFS哈希值\nasync function savetoIPFS(uploadFiles) {\n  try {\n    if (uploadFiles.length != 0) {\n      //ipfs的add方法是将东西添加到ipfs网络上\n      let results = await create({\n        host: \"10.39.5.194\",\n        port: \"5001\",\n        protocol: \"http\",\n      }).add(\n        uploadFiles[0].raw,\n        { remote: true, pin: true, }\n      );\n      return results.path;\n    }\n  } catch (err) {\n    console.error(err);\n    return null\n  }\n}\n\n// async function mintNFT(NFTContract, Name, Symbol, nftName,description,uploadFiles) {\nasync function mintNFT(NFTContract, name, symbol, maxmums, NFTName, description, uploadFiles) {\n  let nftCount = 0\n  let ipfsHash = await savetoIPFS(uploadFiles)\n  let ipfsPath = `ipfs/${ipfsHash}?filename=${NFTName}`\n  if (ipfsHash != null) {\n    try {\n      await NFTContract.methods._currentId().call().then(re => { nftCount = re })\n    } catch (error) {\n      console.log(error);\n      console.log(NFTContract.methods);\n    }\n    await NFTContract.methods.mint(NFTName, description, ipfsHash).send({ from: store.state.currentAddress })\n    // // ====================  信息存储到数据库中\n    await request({\n      url: '/createNFT',\n      method: 'post',\n      data: {\n        \"ownerAddress\": store.state.currentAddress,\n        \"nftAddress\": NFTContract._address,\n        \"ipfsPath\": `${publicGatewayUrl}${ipfsPath}`,\n        \"isActive\": false,\n        \"price\": \"0\",\n        \"name\": name,\n        \"symbol\": symbol,\n        \"nftName\": NFTName,\n        \"maxmums\": Number(maxmums),\n        \"description\": description,\n        \"tokenId\": Number(nftCount)\n      }\n    }).then(res => {\n      if (res.status == 200) {\n        // postOwnerContractList({ ownerAddress: store.state.currentAddress }).then((re) => {\n        //   store.commit(\"setOwnerNFTList\", re.data.data);\n        // });\n        // return\n      } else {\n        return\n      }\n    })\n  }\n}\n\n//====================  生成NFT合约实例\nexport async function getNFTStruct(nftAddress) {\n  return await new store.state.Web3.eth.Contract(MintNFTContractABI, nftAddress);\n}\n\n//==================== NFT总控\nexport async function MakeNFT(Name, Symbol, uploadFiles, Maxmums, FirstNFTName, Description) {\n  console.log(\"部署合约\");\n  const NFTContract = await deployNFTContract(Name, Symbol, Maxmums);\n  console.log(\"铸造\");\n  await mintNFT(NFTContract, Name, Symbol, Maxmums, FirstNFTName, Description, uploadFiles)\n}\n//====================  市场合约\nlet MarketContract;\nlet marketUseWeb3;\n// 实例化市场合约\nif (window.ethereum != undefined) {\n  marketUseWeb3 = new Web3(window.ethereum);\n} else {\n  marketUseWeb3 = new Web3(rpcUrl());\n}\nconsole.log();\nMarketContract = new marketUseWeb3.eth.Contract(\n  MarketContractABI,\n  MarketContractAddress\n);\n//====================  上架NFT\nexport async function getSaleList() {\n  let SaleList = []\n  try {\n    await MarketContract.methods.getSales().call().then(re => {\n      SaleList = re\n    });\n  } catch (error) {\n    console.log(error);\n  }\n  return SaleList\n}\n\nexport async function UpSale(NFT) {\n  \n  console.log(NFT);\n  //授权\n  let NFTContract = await new store.state.Web3.eth.Contract(\n    MintNFTContractABI,\n    NFT.nftAddress\n  );\n  await NFTContract.methods\n    .approve(MarketContractAddress, NFT.tokenId)\n    .send({ from: store.state.currentAddress });\n\n  await MarketContract.methods.createSale(NFT.nftAddress, NFT.tokenId, store.state.Web3.utils.toWei(NFT.price, 'ether')\n    , \"\").send({ from: store.state.currentAddress })\n\n  let SaleId;\n  await MarketContract.methods.SaleId().call().then(re => {\n      SaleId = re\n    })\n  var Sale = {\n    saleId: Number(SaleId),\n    NFT: NFT\n  }\n    // await updateSaleactive(NFT)\n  await insertSale(Sale)\n}\n\nexport async function Buy(NFT) {\n  // console.log(MarketContract);\n  console.log(NFT);\n  // console.log(NFT.saleId);\n  if (!store.state.Web3) {\n    alert(\"请登录\")\n    return\n  }\n  console.log(NFT.price);\n  await MarketContract.methods.buy(NFT.saleId)\n    .send({\n      from: store.state.currentAddress,\n      value: store.state.Web3.utils.toWei(NFT.price, 'ether'),\n    });\n}\n\nexport async function getFeePercentage() {\n  let FeePercentage;\n  await MarketContract.methods.feePercentage().call().then(re => { FeePercentage = re })\n  return FeePercentage;\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}