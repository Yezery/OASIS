{"ast":null,"code":"import _defineProperty from \"/Users/yezery/Oasis/OASIS/node_modules/.store/@babel+runtime@7.22.15/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport \"core-js/modules/es.typed-array.to-reversed.js\";\nimport \"core-js/modules/es.typed-array.to-sorted.js\";\nimport \"core-js/modules/es.typed-array.with.js\";\nimport { Record } from './record.js';\nimport * as utils from './utils.js';\nexport class Libp2pRecord {\n  constructor(key, value, timeReceived) {\n    _defineProperty(this, \"key\", void 0);\n    _defineProperty(this, \"value\", void 0);\n    _defineProperty(this, \"timeReceived\", void 0);\n    if (!(key instanceof Uint8Array)) {\n      throw new Error('key must be a Uint8Array');\n    }\n    if (!(value instanceof Uint8Array)) {\n      throw new Error('value must be a Uint8Array');\n    }\n    this.key = key;\n    this.value = value;\n    this.timeReceived = timeReceived;\n  }\n  serialize() {\n    return Record.encode(this.prepareSerialize());\n  }\n  /**\n   * Return the object format ready to be given to the protobuf library.\n   */\n  prepareSerialize() {\n    return {\n      key: this.key,\n      value: this.value,\n      timeReceived: utils.toRFC3339(this.timeReceived)\n    };\n  }\n  /**\n   * Decode a protobuf encoded record\n   */\n  static deserialize(raw) {\n    const rec = Record.decode(raw);\n    return new Libp2pRecord(rec.key, rec.value, new Date(rec.timeReceived));\n  }\n  /**\n   * Create a record from the raw object returned from the protobuf library\n   */\n  static fromDeserialized(obj) {\n    const recvtime = utils.parseRFC3339(obj.timeReceived);\n    if (obj.key == null) {\n      throw new Error('key missing from deserialized object');\n    }\n    if (obj.value == null) {\n      throw new Error('value missing from deserialized object');\n    }\n    const rec = new Libp2pRecord(obj.key, obj.value, recvtime);\n    return rec;\n  }\n}","map":{"version":3,"names":["Record","utils","Libp2pRecord","constructor","key","value","timeReceived","_defineProperty","Uint8Array","Error","serialize","encode","prepareSerialize","toRFC3339","deserialize","raw","rec","decode","Date","fromDeserialized","obj","recvtime","parseRFC3339"],"sources":["../../src/index.ts"],"sourcesContent":[null],"mappings":";;;;AAAA,SACEA,MAAM,QACD,aAAa;AACpB,OAAO,KAAKC,KAAK,MAAM,YAAY;AAGnC,OAAM,MAAOC,YAAY;EAKvBC,YAAaC,GAAe,EAAEC,KAAiB,EAAEC,YAAkB;IAAAC,eAAA;IAAAA,eAAA;IAAAA,eAAA;IACjE,IAAI,EAAEH,GAAG,YAAYI,UAAU,CAAC,EAAE;MAChC,MAAM,IAAIC,KAAK,CAAC,0BAA0B,CAAC;;IAG7C,IAAI,EAAEJ,KAAK,YAAYG,UAAU,CAAC,EAAE;MAClC,MAAM,IAAIC,KAAK,CAAC,4BAA4B,CAAC;;IAG/C,IAAI,CAACL,GAAG,GAAGA,GAAG;IACd,IAAI,CAACC,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACC,YAAY,GAAGA,YAAY;EAClC;EAEAI,SAASA,CAAA;IACP,OAAOV,MAAM,CAACW,MAAM,CAAC,IAAI,CAACC,gBAAgB,EAAE,CAAC;EAC/C;EAEA;;;EAGAA,gBAAgBA,CAAA;IACd,OAAO;MACLR,GAAG,EAAE,IAAI,CAACA,GAAG;MACbC,KAAK,EAAE,IAAI,CAACA,KAAK;MACjBC,YAAY,EAAEL,KAAK,CAACY,SAAS,CAAC,IAAI,CAACP,YAAY;KAChD;EACH;EAEA;;;EAGA,OAAOQ,WAAWA,CAAEC,GAAgC;IAClD,MAAMC,GAAG,GAAGhB,MAAM,CAACiB,MAAM,CAACF,GAAG,CAAC;IAE9B,OAAO,IAAIb,YAAY,CAACc,GAAG,CAACZ,GAAG,EAAEY,GAAG,CAACX,KAAK,EAAE,IAAIa,IAAI,CAACF,GAAG,CAACV,YAAY,CAAC,CAAC;EACzE;EAEA;;;EAGA,OAAOa,gBAAgBA,CAAEC,GAAW;IAClC,MAAMC,QAAQ,GAAGpB,KAAK,CAACqB,YAAY,CAACF,GAAG,CAACd,YAAY,CAAC;IAErD,IAAIc,GAAG,CAAChB,GAAG,IAAI,IAAI,EAAE;MACnB,MAAM,IAAIK,KAAK,CAAC,sCAAsC,CAAC;;IAGzD,IAAIW,GAAG,CAACf,KAAK,IAAI,IAAI,EAAE;MACrB,MAAM,IAAII,KAAK,CAAC,wCAAwC,CAAC;;IAG3D,MAAMO,GAAG,GAAG,IAAId,YAAY,CAC1BkB,GAAG,CAAChB,GAAG,EAAEgB,GAAG,CAACf,KAAK,EAAEgB,QAAQ,CAC7B;IAED,OAAOL,GAAG;EACZ"},"metadata":{},"sourceType":"module","externalDependencies":[]}