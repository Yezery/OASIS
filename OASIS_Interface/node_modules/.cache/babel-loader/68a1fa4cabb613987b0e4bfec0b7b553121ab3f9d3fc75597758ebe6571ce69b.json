{"ast":null,"code":"import errCode from 'err-code';\nimport extractDataFromBlock from '../utils/extract-data-from-block.js';\nimport validateOffsetAndLength from '../utils/validate-offset-and-length.js';\nimport * as mh from 'multiformats/hashes/digest';\n\n/**\n * @typedef {import('../types').ExporterOptions} ExporterOptions\n * @typedef {import('../types').Resolver} Resolver\n */\n\n/**\n * @param {Uint8Array} node\n */\nconst rawContent = node => {\n  /**\n   * @param {ExporterOptions} options\n   */\n  async function* contentGenerator(options = {}) {\n    const {\n      offset,\n      length\n    } = validateOffsetAndLength(node.length, options.offset, options.length);\n    yield extractDataFromBlock(node, 0, offset, offset + length);\n  }\n  return contentGenerator;\n};\n\n/**\n * @type {Resolver}\n */\nconst resolve = async (cid, name, path, toResolve, resolve, depth, blockstore, options) => {\n  if (toResolve.length) {\n    throw errCode(new Error(`No link named ${path} found in raw node ${cid}`), 'ERR_NOT_FOUND');\n  }\n  const buf = await mh.decode(cid.multihash.bytes);\n  return {\n    entry: {\n      type: 'identity',\n      name,\n      path,\n      cid,\n      content: rawContent(buf.digest),\n      depth,\n      size: buf.digest.length,\n      node: buf.digest\n    }\n  };\n};\nexport default resolve;","map":{"version":3,"names":["errCode","extractDataFromBlock","validateOffsetAndLength","mh","rawContent","node","contentGenerator","options","offset","length","resolve","cid","name","path","toResolve","depth","blockstore","Error","buf","decode","multihash","bytes","entry","type","content","digest","size"],"sources":["/Users/yezery/Oasis/OASIS/node_modules/.store/ipfs-unixfs-exporter@10.0.1/node_modules/ipfs-unixfs-exporter/src/resolvers/identity.js"],"sourcesContent":["import errCode from 'err-code'\nimport extractDataFromBlock from '../utils/extract-data-from-block.js'\nimport validateOffsetAndLength from '../utils/validate-offset-and-length.js'\nimport * as mh from 'multiformats/hashes/digest'\n\n/**\n * @typedef {import('../types').ExporterOptions} ExporterOptions\n * @typedef {import('../types').Resolver} Resolver\n */\n\n/**\n * @param {Uint8Array} node\n */\nconst rawContent = (node) => {\n  /**\n   * @param {ExporterOptions} options\n   */\n  async function * contentGenerator (options = {}) {\n    const {\n      offset,\n      length\n    } = validateOffsetAndLength(node.length, options.offset, options.length)\n\n    yield extractDataFromBlock(node, 0, offset, offset + length)\n  }\n\n  return contentGenerator\n}\n\n/**\n * @type {Resolver}\n */\nconst resolve = async (cid, name, path, toResolve, resolve, depth, blockstore, options) => {\n  if (toResolve.length) {\n    throw errCode(new Error(`No link named ${path} found in raw node ${cid}`), 'ERR_NOT_FOUND')\n  }\n  const buf = await mh.decode(cid.multihash.bytes)\n\n  return {\n    entry: {\n      type: 'identity',\n      name,\n      path,\n      cid,\n      content: rawContent(buf.digest),\n      depth,\n      size: buf.digest.length,\n      node: buf.digest\n    }\n  }\n}\n\nexport default resolve\n"],"mappings":"AAAA,OAAOA,OAAO,MAAM,UAAU;AAC9B,OAAOC,oBAAoB,MAAM,qCAAqC;AACtE,OAAOC,uBAAuB,MAAM,wCAAwC;AAC5E,OAAO,KAAKC,EAAE,MAAM,4BAA4B;;AAEhD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAMC,UAAU,GAAIC,IAAI,IAAK;EAC3B;AACF;AACA;EACE,gBAAiBC,gBAAgBA,CAAEC,OAAO,GAAG,CAAC,CAAC,EAAE;IAC/C,MAAM;MACJC,MAAM;MACNC;IACF,CAAC,GAAGP,uBAAuB,CAACG,IAAI,CAACI,MAAM,EAAEF,OAAO,CAACC,MAAM,EAAED,OAAO,CAACE,MAAM,CAAC;IAExE,MAAMR,oBAAoB,CAACI,IAAI,EAAE,CAAC,EAAEG,MAAM,EAAEA,MAAM,GAAGC,MAAM,CAAC;EAC9D;EAEA,OAAOH,gBAAgB;AACzB,CAAC;;AAED;AACA;AACA;AACA,MAAMI,OAAO,GAAG,MAAAA,CAAOC,GAAG,EAAEC,IAAI,EAAEC,IAAI,EAAEC,SAAS,EAAEJ,OAAO,EAAEK,KAAK,EAAEC,UAAU,EAAET,OAAO,KAAK;EACzF,IAAIO,SAAS,CAACL,MAAM,EAAE;IACpB,MAAMT,OAAO,CAAC,IAAIiB,KAAK,CAAE,iBAAgBJ,IAAK,sBAAqBF,GAAI,EAAC,CAAC,EAAE,eAAe,CAAC;EAC7F;EACA,MAAMO,GAAG,GAAG,MAAMf,EAAE,CAACgB,MAAM,CAACR,GAAG,CAACS,SAAS,CAACC,KAAK,CAAC;EAEhD,OAAO;IACLC,KAAK,EAAE;MACLC,IAAI,EAAE,UAAU;MAChBX,IAAI;MACJC,IAAI;MACJF,GAAG;MACHa,OAAO,EAAEpB,UAAU,CAACc,GAAG,CAACO,MAAM,CAAC;MAC/BV,KAAK;MACLW,IAAI,EAAER,GAAG,CAACO,MAAM,CAAChB,MAAM;MACvBJ,IAAI,EAAEa,GAAG,CAACO;IACZ;EACF,CAAC;AACH,CAAC;AAED,eAAef,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}