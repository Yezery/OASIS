{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { UpSale, DownSale } from \"@/api/axios/contract.js\";\nimport ChatMemu from \"@/views/chat/ChatMemu.vue\";\nimport { getOwnerNFTsByAddress } from \"@/api/axios/ownerContractLIst\";\nexport default {\n  components: {\n    ChatMemu\n  },\n  data() {\n    return {\n      userBalance: 0,\n      userName: \"\",\n      userAvatar: require(\"@/assets/webAssets/MetaMask.png\"),\n      UserNFTListInf: [],\n      NFTArray: [],\n      nftContractAddressList: []\n    };\n  },\n  async mounted() {\n    this.init();\n    await this.GetNFTContractNFT();\n    console.log(this.UserNFTListInf);\n  },\n  methods: {\n    async init() {\n      let user = this.$store.state.currentAddress;\n      try {\n        this.userBalance = this.$store.state.Web3.utils.fromWei(await this.$store.state.Web3.eth.getBalance(user), \"ether\").slice(0, 4);\n        this.userName = `${user.slice(0, 5)}...${user.slice(37)}`;\n        this.userAvatar = \"data:image/png;base64,\" + new this.Identicon(user, 120).toString();\n      } catch (error) {\n        return;\n      }\n    },\n    async upSale(NFT) {\n      this.$prompt(\"请输入价格(ETH)\", \"上架\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        inputPattern: /^(?=.*[1-9])\\d*(?:\\.\\d+)?$/,\n        inputErrorMessage: \"只能是数字\"\n      }).then(async ({\n        value\n      }) => {\n        NFT.price = value;\n        try {\n          await UpSale(NFT);\n        } catch (error) {\n          this.$message({\n            type: \"waring\",\n            message: \"上架异常\"\n          });\n        }\n        this.$message({\n          type: \"success\",\n          message: \"上架成功 \"\n        });\n      }).catch(() => {\n        this.$message({\n          type: \"info\",\n          message: \"取消输入\"\n        });\n      });\n      this.UserNFTListInf = await this.$store.state.ownerNFTList;\n    },\n    async downSale(NFT) {\n      await DownSale(NFT);\n      this.UserNFTListInf = this.$store.state.ownerNFTList;\n    },\n    async GetNFTContractNFT() {\n      await this.getSetAddressArray();\n      let NFTInfList = [];\n      for (const nftaddress of this.nftContractAddressList) {\n        let nft = {\n          ownerAddress: this.$store.state.currentAddress,\n          nftAddress: nftaddress\n        };\n        await getOwnerNFTsByAddress(nft).then(re => {\n          NFTInfList.push(re.data.data);\n        });\n      }\n      this.NFTArray = NFTInfList;\n    },\n    async getSetAddressArray() {\n      for (const nft of this.$store.state.ownerNFTList) {\n        this.nftContractAddressList.push(nft.nftAddress);\n      }\n      this.nftContractAddressList = new Set(this.nftContractAddressList);\n    }\n  }\n};","map":{"version":3,"names":["UpSale","DownSale","ChatMemu","getOwnerNFTsByAddress","components","data","userBalance","userName","userAvatar","require","UserNFTListInf","NFTArray","nftContractAddressList","mounted","init","GetNFTContractNFT","console","log","methods","user","$store","state","currentAddress","Web3","utils","fromWei","eth","getBalance","slice","Identicon","toString","error","upSale","NFT","$prompt","confirmButtonText","cancelButtonText","inputPattern","inputErrorMessage","then","value","price","$message","type","message","catch","ownerNFTList","downSale","getSetAddressArray","NFTInfList","nftaddress","nft","ownerAddress","nftAddress","re","push","Set"],"sources":["src/views/user/UserHome.vue"],"sourcesContent":["<template>\n  <div class=\"userHomeMain\">\n    <el-container>\n      <el-aside\n        style=\"width: auto;\"\n        class=\"animate__animated animate__fadeInLeft\"\n      >\n        <ChatMemu ref=\"ChatMemu\" />\n      </el-aside>\n      <div class=\"inf\">\n        <div class=\"infBox\">\n          <el-container>\n            <div class=\"content \">\n              <div class=\"contentTop animate__animated animate__fadeInDown\">\n                <div class=\"userInf \">\n                  <div class=\"userInfTop\">\n                    <div class=\"userAvatarBox\">\n                      <img\n                        :src=\"userAvatar\"\n                        alt=\"\"\n                      >\n                    </div>\n                    <div class=\"userName\">\n                      {{ userName }}\n                    </div>\n                  </div>\n                  <div class=\"userInfBottom\">\n                    <div class=\"UserBalance\">\n                      <span style=\"font-size: 4vw;font-weight: 800;\"> {{ userBalance }}</span> ETH\n                    </div>\n                  </div>\n                </div>\n                <div class=\"userPet\" />\n              </div>\n              <div class=\"contentBottom animate__animated animate__fadeInUp\">\n                <div class=\"NFTListBox\">\n                  <div class=\"NFTList\">\n                    <el-collapse>\n                      <el-collapse-item\n                        :title=\"address\"\n                        v-for=\"address,i in nftContractAddressList\"\n                        :key=\"i\"\n                        :name=\"address\"\n                      >\n                        <div\n                          class=\"ToSellMain\"\n                          v-for=\"inf,i in NFTArray\"\n                          :key=\"i\"\n                        >\n                          <div\n                            class=\"NFTInfBox\"\n                            v-for=\"nft,i in inf\"\n                            :key=\"i\"\n                          >\n                            <template v-if=\"nft.nftAddress == address\">\n                              <div class=\"NFTInf\">\n                                <div style=\"height:65%;width: 100%;overflow: hidden;\">\n                                  <img\n                                    class=\"NFTImage\"\n                                    :src=\"nft.ipfsPath\"\n                                    alt=\"\"\n                                  >\n                                </div>\n                                <div class=\"Inf\">\n                                  <div class=\"InfTop\">\n                                    <div class=\"NFTName\">\n                                      {{ nft.nftName }}\n                                    </div>\n                                    <div\n                                      class=\"Active\"\n                                      v-if=\"nft.isActive\"\n                                    >\n                                      <i class=\"el-icon-sort\" />\n                                      <span style=\"font-weight: 800; font-size: 12px;\">在售</span>\n                                    </div>\n                                    <div\n                                      class=\"NoActive\"\n                                      v-else\n                                    >\n                                      <i class=\"el-icon-sort\" />\n                                      <span style=\"font-weight: 800; font-size: 12px;\"> 未上架 </span>\n                                    </div>\n                                  </div>\n                                  <div\n                                    v-if=\"nft.isActive\"\n                                    class=\"priceBox\"\n                                  >\n                                    <span class=\"price\">{{ nft.price }}</span> ETH\n                                  </div>\n                                  <div\n                                    v-else\n                                    class=\"priceBox\"\n                                  >\n                                    <span class=\"price\" />\n                                  </div>\n                                  <div\n                                    class=\"InfBottom \"\n                                    style=\"background-color: #d63131b3;\"\n                                    @click=\"downSale(nft)\"\n                                    v-if=\"nft.isActive\"\n                                  >\n                                    <i class=\"el-icon-sold-out\" />\n                                  </div>\n                                  <div\n                                    class=\"InfBottom\"\n                                    v-else\n                                    @click=\"upSale(nft)\"\n                                  >\n                                    <i class=\"el-icon-sell\" />\n                                  </div>\n                                </div>\n                              </div>\n                            </template>\n                          </div>\n                        </div>\n                        <div class=\"ADDNFT\">\n                          <router-link\n                            class=\"addImit\"\n                            :to=\"{ name: 'addImit',query:{nftContract:address} }\"\n                          >\n                            <i class=\"el-icon-plus\" />\n                          </router-link>\n                        </div>\n                      </el-collapse-item>\n                    </el-collapse>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <el-aside class=\"Mainbar animate__animated animate__fadeInRight\">\n              <div class=\"barBox\" />\n            </el-aside>\n          </el-container>\n        </div>\n      </div>\n    </el-container>\n  </div>\n</template>\n\n<script>\n  import { UpSale, DownSale } from \"@/api/axios/contract.js\";\n  import ChatMemu from \"@/views/chat/ChatMemu.vue\";\n  import { getOwnerNFTsByAddress } from \"@/api/axios/ownerContractLIst\";\n  export default {\n    components: { ChatMemu },\n    data() {\n      return {\n        userBalance: 0,\n        userName: \"\",\n        userAvatar: require(\"@/assets/webAssets/MetaMask.png\"),\n        UserNFTListInf: [],\n        NFTArray: [],\n        nftContractAddressList: [],\n      };\n    },\n    async mounted() {\n      this.init();\n      await this.GetNFTContractNFT();\n      console.log(this.UserNFTListInf);\n    },\n    methods: {\n      async init() {\n        let user = this.$store.state.currentAddress;\n        try {\n          this.userBalance = this.$store.state.Web3.utils\n            .fromWei(await this.$store.state.Web3.eth.getBalance(user), \"ether\")\n            .slice(0, 4);\n          this.userName = `${user.slice(0, 5)}...${user.slice(37)}`;\n          this.userAvatar =\n            \"data:image/png;base64,\" + new this.Identicon(user, 120).toString();\n        } catch (error) {\n          return;\n        }\n      },\n      async upSale(NFT) {\n        this.$prompt(\"请输入价格(ETH)\", \"上架\", {\n          confirmButtonText: \"确定\",\n          cancelButtonText: \"取消\",\n          inputPattern: /^(?=.*[1-9])\\d*(?:\\.\\d+)?$/,\n          inputErrorMessage: \"只能是数字\",\n        })\n          .then(async ({ value }) => {\n            NFT.price = value;\n            try {\n              await UpSale(NFT);\n            } catch (error) {\n              this.$message({\n                type: \"waring\",\n                message: \"上架异常\",\n              });\n            }\n            this.$message({\n              type: \"success\",\n              message: \"上架成功 \",\n            });\n          })\n          .catch(() => {\n            this.$message({\n              type: \"info\",\n              message: \"取消输入\",\n            });\n          });\n\n        this.UserNFTListInf = await this.$store.state.ownerNFTList;\n      },\n      async downSale(NFT) {\n        await DownSale(NFT);\n        this.UserNFTListInf = this.$store.state.ownerNFTList;\n      },\n      async GetNFTContractNFT() {\n        await this.getSetAddressArray();\n        let NFTInfList = [];\n        for (const nftaddress of this.nftContractAddressList) {\n          let nft = {\n            ownerAddress: this.$store.state.currentAddress,\n            nftAddress: nftaddress,\n          };\n          await getOwnerNFTsByAddress(nft).then((re) => {\n            NFTInfList.push(re.data.data);\n          });\n        }\n        this.NFTArray = NFTInfList;\n      },\n      async getSetAddressArray() {\n        for (const nft of this.$store.state.ownerNFTList) {\n          this.nftContractAddressList.push(nft.nftAddress);\n        }\n        this.nftContractAddressList = new Set(this.nftContractAddressList);\n      },\n    },\n  };\n</script>\n\n<style lang=\"scss\" scoped>\n::-webkit-scrollbar {\n  width: 6px;\n  height: 8px;\n  display: none;\n  background-color: transparent;\n}\n::-webkit-scrollbar-thumb {\n  background-color: #ccc;\n  border-radius: 25px;\n}\n.userHomeMain {\n  width: 100%;\n  height: 100vh;\n  background-color: var(--White-eee--);\n  .inf {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    .infBox {\n      border-radius: 30px;\n      width: 95%;\n      height: 95%;\n\n      .content {\n        overflow: auto;\n        height: 100%;\n        width: 100%;\n        color: var(--Dark--);\n        background-color: var(--White-eee--);\n\n        .contentTop {\n          width: 100%;\n          display: flex;\n          justify-content: space-around;\n          align-items: center;\n\n          .userInf {\n            background-color: var(--White--);\n            border-radius: 50px;\n            width: 600px;\n            height: 280px;\n            display: flex;\n            justify-content: center;\n            flex-direction: column;\n            align-content: flex-start;\n            margin-right: 5%;\n            overflow: hidden;\n            padding: 0;\n            transition: all 0.3s ease-in-out;\n            &:hover {\n              box-shadow: rgba(0, 0, 0, 0.1) 0px 0px 5px 0px,\n                rgba(0, 0, 0, 0.1) 0px 0px 1px 0px;\n              transition: all 0.3s ease-in-out;\n            }\n            .userInfTop {\n              width: 100%;\n              height: 100%;\n              display: flex;\n              justify-content: flex-start;\n              align-items: center;\n              margin-top: 20px;\n              .userAvatarBox {\n                margin-left: 25px;\n                margin-right: 25px;\n                min-width: 95px;\n                min-height: 95px;\n                overflow: hidden;\n                border-radius: 50%;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                background-color: rgba(230, 230, 230, 1);\n                img {\n                  object-fit: cover;\n                  width: 85px;\n                  height: 85px;\n                }\n              }\n              .userName {\n                font-weight: 800;\n                font-size: 25px;\n              }\n            }\n            .userInfBottom {\n              width: 100%;\n              height: 100%;\n              display: flex;\n              justify-content: flex-end;\n              align-items: center;\n              .UserBalance {\n                margin-right: 35px;\n                font-size: 1vw;\n              }\n            }\n          }\n          .userPet {\n            @extend .userInf;\n          }\n          .TopBackground {\n            position: relative;\n            width: 100%;\n            height: 30%;\n            .userName {\n              position: absolute;\n              width: 726px;\n              height: 180px;\n              left: 113px;\n              top: 185px;\n              color: rgb(255, 255, 255);\n              font-family: Inter;\n              font-size: 5vw;\n              font-weight: 800;\n              line-height: 90px;\n              letter-spacing: -2px;\n              text-align: left;\n            }\n          }\n        }\n        .contentBottom {\n          width: 95%;\n          height: 90%;\n          margin-top: 5%;\n          display: flex;\n          justify-content: center;\n          .NFTListBox {\n            width: 100%;\n            background-color: var(--White--);\n            border-radius: 50px;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            .NFTList {\n              width: 95%;\n              height: 100%;\n              margin-top: 10%;\n              .ToSellMain {\n                height: 100%;\n                width: 100%;\n                font-family: Arial, Helvetica, sans-serif;\n                margin-top: 2%;\n                display: flex;\n                justify-content: flex-start;\n                flex-wrap: wrap;\n                margin-left: 2%;\n                .NFTInfBox {\n                  display: flex;\n                  justify-content: flex-start;\n                  align-items: center;\n                  margin: 1% 2% 2% 2%;\n                  .NFTInf {\n                    background-color: var(--White--);\n                    border-radius: 50px;\n                    width: 320px;\n                    height: 420px;\n                    display: inline-block;\n                    overflow: hidden;\n                    transition: all 0.7s ease-in-out;\n                    box-shadow: rgba(17, 17, 26, 0.05) 0px 1px 0px,\n                      rgba(17, 17, 26, 0.1) 0px 0px 8px;\n                    .NFTImage {\n                      width: 100%;\n                      height: 100%;\n                      object-fit: contain;\n                      transition: all 0.6s;\n                      cursor: pointer;\n                      &:hover {\n                        transform: scale(1.1);\n\n                        transition: all 0.6s;\n                      }\n                    }\n                  }\n\n                  .NFTInf:hover {\n                    transition: all 0.6s ease-in-out;\n                    transform: translateY(-20px) perspective(1000px);\n                  }\n                  .NFTInf:hover > * {\n                    transform: none;\n                  }\n                }\n\n                .Inf {\n                  width: 100%;\n                  height: 60%;\n                  .priceBox {\n                    padding-top: 2%;\n                    text-align: left;\n                    width: 100%;\n                    font-size: 0.5vw;\n                    .price {\n                      margin-left: 15%;\n                      font-size: 1.5vw;\n                    }\n                  }\n                  .InfTop {\n                    width: 100%;\n                    height: 40px;\n                    position: relative;\n                    .NoActive {\n                      position: absolute;\n                      right: 10%;\n                      top: 15px;\n                      width: 100px;\n                      padding: 4px 0px 4px 0px;\n                      color: white;\n                      background-color: #d63131b3;\n                      border-radius: 10px;\n                      transition: all 0.3s ease-in-out;\n                    }\n                    .Active {\n                      @extend .NoActive;\n                      background-color: rgba(85, 201, 96, 0.12);\n                      color: #55c960;\n                    }\n                    .NFTName {\n                      position: absolute;\n                      left: 0%;\n                      top: 19px;\n                      color: var(--Dark--);\n                      font-weight: 800;\n                      text-align: left;\n                      font-size: 14px;\n                      margin-left: 20%;\n                    }\n                  }\n                  .InfBottom {\n                    font-size: 1.5vw;\n                    display: flex;\n                    justify-content: center;\n                    align-items: center;\n                    height: 20%;\n                    color: white;\n                    background-color: rgba(0, 149, 255, 0.958);\n                    cursor: pointer;\n                  }\n                }\n\n                .ownerAndToSell {\n                  width: 100%;\n                  display: flex;\n                  margin-top: 18px;\n                  justify-content: center;\n                  align-items: center;\n                }\n                .ToSellBox {\n                  display: flex;\n                  justify-content: flex-start;\n                  align-items: center;\n                }\n\n                .downSale {\n                  background-color: #d63131e5;\n                  color: white;\n                  &:hover {\n                    background-color: rgb(255, 0, 0);\n                    transition: all 0.3s ease-in-out;\n                  }\n                }\n                .apporve {\n                  font-size: 12px;\n                  font-weight: 800;\n                }\n                .ToSellHeader {\n                  display: flex;\n                  justify-content: space-between;\n                  width: 95%;\n                  height: 10%;\n                  font-size: 25px;\n                  margin-top: 3%;\n                  border-radius: 30px;\n                  padding: 3.5% 0;\n                  font-weight: 800;\n                  color: var(--Dark--);\n                }\n                .ToSellHeaderBox {\n                  width: 100%;\n                  text-align: center;\n                  display: flex;\n                  justify-content: center;\n                  align-items: center;\n                }\n              }\n              .ADDNFT {\n                background-color: var(--White--);\n                border-radius: 50px;\n                margin-left: 4%;\n                width: 320px;\n                height: 400px;\n                display: inline-block;\n                transition: all 0.7s ease-in-out;\n                box-shadow: rgba(17, 17, 26, 0.05) 0px 1px 0px,\n                  rgba(17, 17, 26, 0.1) 0px 0px 8px;\n                cursor: pointer;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                i {\n                  font-size: 70px;\n                  color: var(--Dark--);\n                }\n              }\n            }\n          }\n        }\n      }\n      .Mainbar {\n        padding: 0 !important;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        background-color: transparent;\n\n        .barBox {\n          height: 100%;\n          background-color: var(--White--);\n          width: 95%;\n          border-radius: 50px;\n          transition: all 0.3s ease-in-out;\n          &:hover {\n            box-shadow: rgba(0, 0, 0, 0.1) 0px 0px 5px 0px,\n              rgba(0, 0, 0, 0.1) 0px 0px 1px 0px;\n            transition: all 0.3s ease-in-out;\n          }\n        }\n      }\n    }\n  }\n}\n</style>\n<style lang=\"scss\" scoped>\n@import \"@/style/index.css\";\n</style>\n<style lang=\"scss\" scoped>\n@import \"@/style/MarketShop/index.scss\";\n</style> \n  "],"mappings":";AA4IA,SAAAA,MAAA,EAAAC,QAAA;AACA,OAAAC,QAAA;AACA,SAAAC,qBAAA;AACA;EACAC,UAAA;IAAAF;EAAA;EACAG,KAAA;IACA;MACAC,WAAA;MACAC,QAAA;MACAC,UAAA,EAAAC,OAAA;MACAC,cAAA;MACAC,QAAA;MACAC,sBAAA;IACA;EACA;EACA,MAAAC,QAAA;IACA,KAAAC,IAAA;IACA,WAAAC,iBAAA;IACAC,OAAA,CAAAC,GAAA,MAAAP,cAAA;EACA;EACAQ,OAAA;IACA,MAAAJ,KAAA;MACA,IAAAK,IAAA,QAAAC,MAAA,CAAAC,KAAA,CAAAC,cAAA;MACA;QACA,KAAAhB,WAAA,QAAAc,MAAA,CAAAC,KAAA,CAAAE,IAAA,CAAAC,KAAA,CACAC,OAAA,YAAAL,MAAA,CAAAC,KAAA,CAAAE,IAAA,CAAAG,GAAA,CAAAC,UAAA,CAAAR,IAAA,YACAS,KAAA;QACA,KAAArB,QAAA,MAAAY,IAAA,CAAAS,KAAA,YAAAT,IAAA,CAAAS,KAAA;QACA,KAAApB,UAAA,GACA,oCAAAqB,SAAA,CAAAV,IAAA,OAAAW,QAAA;MACA,SAAAC,KAAA;QACA;MACA;IACA;IACA,MAAAC,OAAAC,GAAA;MACA,KAAAC,OAAA;QACAC,iBAAA;QACAC,gBAAA;QACAC,YAAA;QACAC,iBAAA;MACA,GACAC,IAAA;QAAAC;MAAA;QACAP,GAAA,CAAAQ,KAAA,GAAAD,KAAA;QACA;UACA,MAAAxC,MAAA,CAAAiC,GAAA;QACA,SAAAF,KAAA;UACA,KAAAW,QAAA;YACAC,IAAA;YACAC,OAAA;UACA;QACA;QACA,KAAAF,QAAA;UACAC,IAAA;UACAC,OAAA;QACA;MACA,GACAC,KAAA;QACA,KAAAH,QAAA;UACAC,IAAA;UACAC,OAAA;QACA;MACA;MAEA,KAAAlC,cAAA,cAAAU,MAAA,CAAAC,KAAA,CAAAyB,YAAA;IACA;IACA,MAAAC,SAAAd,GAAA;MACA,MAAAhC,QAAA,CAAAgC,GAAA;MACA,KAAAvB,cAAA,QAAAU,MAAA,CAAAC,KAAA,CAAAyB,YAAA;IACA;IACA,MAAA/B,kBAAA;MACA,WAAAiC,kBAAA;MACA,IAAAC,UAAA;MACA,WAAAC,UAAA,SAAAtC,sBAAA;QACA,IAAAuC,GAAA;UACAC,YAAA,OAAAhC,MAAA,CAAAC,KAAA,CAAAC,cAAA;UACA+B,UAAA,EAAAH;QACA;QACA,MAAA/C,qBAAA,CAAAgD,GAAA,EAAAZ,IAAA,CAAAe,EAAA;UACAL,UAAA,CAAAM,IAAA,CAAAD,EAAA,CAAAjD,IAAA,CAAAA,IAAA;QACA;MACA;MACA,KAAAM,QAAA,GAAAsC,UAAA;IACA;IACA,MAAAD,mBAAA;MACA,WAAAG,GAAA,SAAA/B,MAAA,CAAAC,KAAA,CAAAyB,YAAA;QACA,KAAAlC,sBAAA,CAAA2C,IAAA,CAAAJ,GAAA,CAAAE,UAAA;MACA;MACA,KAAAzC,sBAAA,OAAA4C,GAAA,MAAA5C,sBAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}