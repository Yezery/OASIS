{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport function isStartable(obj) {\n  return obj != null && typeof obj.start === 'function' && typeof obj.stop === 'function';\n}\nexport async function start(...objs) {\n  const startables = [];\n  for (const obj of objs) {\n    if (isStartable(obj)) {\n      startables.push(obj);\n    }\n  }\n  await Promise.all(startables.map(async s => {\n    if (s.beforeStart != null) {\n      await s.beforeStart();\n    }\n  }));\n  await Promise.all(startables.map(async s => {\n    await s.start();\n  }));\n  await Promise.all(startables.map(async s => {\n    if (s.afterStart != null) {\n      await s.afterStart();\n    }\n  }));\n}\nexport async function stop(...objs) {\n  const startables = [];\n  for (const obj of objs) {\n    if (isStartable(obj)) {\n      startables.push(obj);\n    }\n  }\n  await Promise.all(startables.map(async s => {\n    if (s.beforeStop != null) {\n      await s.beforeStop();\n    }\n  }));\n  await Promise.all(startables.map(async s => {\n    await s.stop();\n  }));\n  await Promise.all(startables.map(async s => {\n    if (s.afterStop != null) {\n      await s.afterStop();\n    }\n  }));\n}","map":{"version":3,"names":["isStartable","obj","start","stop","objs","startables","push","Promise","all","map","s","beforeStart","afterStart","beforeStop","afterStop"],"sources":["../../src/startable.ts"],"sourcesContent":[null],"mappings":";AAkDA,OAAM,SAAUA,WAAWA,CAAEC,GAAQ;EACnC,OAAOA,GAAG,IAAI,IAAI,IAAI,OAAOA,GAAG,CAACC,KAAK,KAAK,UAAU,IAAI,OAAOD,GAAG,CAACE,IAAI,KAAK,UAAU;AACzF;AAEA,OAAO,eAAeD,KAAKA,CAAE,GAAGE,IAAW;EACzC,MAAMC,UAAU,GAAgB,EAAE;EAElC,KAAK,MAAMJ,GAAG,IAAIG,IAAI,EAAE;IACtB,IAAIJ,WAAW,CAACC,GAAG,CAAC,EAAE;MACpBI,UAAU,CAACC,IAAI,CAACL,GAAG,CAAC;;;EAIxB,MAAMM,OAAO,CAACC,GAAG,CACfH,UAAU,CAACI,GAAG,CAAC,MAAMC,CAAC,IAAG;IACvB,IAAIA,CAAC,CAACC,WAAW,IAAI,IAAI,EAAE;MACzB,MAAMD,CAAC,CAACC,WAAW,EAAE;;EAEzB,CAAC,CAAC,CACH;EAED,MAAMJ,OAAO,CAACC,GAAG,CACfH,UAAU,CAACI,GAAG,CAAC,MAAMC,CAAC,IAAG;IACvB,MAAMA,CAAC,CAACR,KAAK,EAAE;EACjB,CAAC,CAAC,CACH;EAED,MAAMK,OAAO,CAACC,GAAG,CACfH,UAAU,CAACI,GAAG,CAAC,MAAMC,CAAC,IAAG;IACvB,IAAIA,CAAC,CAACE,UAAU,IAAI,IAAI,EAAE;MACxB,MAAMF,CAAC,CAACE,UAAU,EAAE;;EAExB,CAAC,CAAC,CACH;AACH;AAEA,OAAO,eAAeT,IAAIA,CAAE,GAAGC,IAAW;EACxC,MAAMC,UAAU,GAAgB,EAAE;EAElC,KAAK,MAAMJ,GAAG,IAAIG,IAAI,EAAE;IACtB,IAAIJ,WAAW,CAACC,GAAG,CAAC,EAAE;MACpBI,UAAU,CAACC,IAAI,CAACL,GAAG,CAAC;;;EAIxB,MAAMM,OAAO,CAACC,GAAG,CACfH,UAAU,CAACI,GAAG,CAAC,MAAMC,CAAC,IAAG;IACvB,IAAIA,CAAC,CAACG,UAAU,IAAI,IAAI,EAAE;MACxB,MAAMH,CAAC,CAACG,UAAU,EAAE;;EAExB,CAAC,CAAC,CACH;EAED,MAAMN,OAAO,CAACC,GAAG,CACfH,UAAU,CAACI,GAAG,CAAC,MAAMC,CAAC,IAAG;IACvB,MAAMA,CAAC,CAACP,IAAI,EAAE;EAChB,CAAC,CAAC,CACH;EAED,MAAMI,OAAO,CAACC,GAAG,CACfH,UAAU,CAACI,GAAG,CAAC,MAAMC,CAAC,IAAG;IACvB,IAAIA,CAAC,CAACI,SAAS,IAAI,IAAI,EAAE;MACvB,MAAMJ,CAAC,CAACI,SAAS,EAAE;;EAEvB,CAAC,CAAC,CACH;AACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}