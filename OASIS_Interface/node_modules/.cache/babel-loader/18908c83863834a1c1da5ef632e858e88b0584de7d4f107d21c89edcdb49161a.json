{"ast":null,"code":"'use strict';\n\nvar util = require('util');\nvar Stream = require('stream');\nvar Parser = require('./parser-async');\nvar Packer = require('./packer-async');\nvar PNGSync = require('./png-sync');\nvar PNG = exports.PNG = function (options) {\n  Stream.call(this);\n  options = options || {}; // eslint-disable-line no-param-reassign\n\n  this.width = options.width || 0;\n  this.height = options.height || 0;\n  this.data = this.width > 0 && this.height > 0 ? new Buffer(4 * this.width * this.height) : null;\n  if (options.fill && this.data) {\n    this.data.fill(0);\n  }\n  this.gamma = 0;\n  this.readable = this.writable = true;\n  this._parser = new Parser(options);\n  this._parser.on('error', this.emit.bind(this, 'error'));\n  this._parser.on('close', this._handleClose.bind(this));\n  this._parser.on('metadata', this._metadata.bind(this));\n  this._parser.on('gamma', this._gamma.bind(this));\n  this._parser.on('parsed', function (data) {\n    this.data = data;\n    this.emit('parsed', data);\n  }.bind(this));\n  this._packer = new Packer(options);\n  this._packer.on('data', this.emit.bind(this, 'data'));\n  this._packer.on('end', this.emit.bind(this, 'end'));\n  this._parser.on('close', this._handleClose.bind(this));\n  this._packer.on('error', this.emit.bind(this, 'error'));\n};\nutil.inherits(PNG, Stream);\nPNG.sync = PNGSync;\nPNG.prototype.pack = function () {\n  if (!this.data || !this.data.length) {\n    this.emit('error', 'No data provided');\n    return this;\n  }\n  process.nextTick(function () {\n    this._packer.pack(this.data, this.width, this.height, this.gamma);\n  }.bind(this));\n  return this;\n};\nPNG.prototype.parse = function (data, callback) {\n  if (callback) {\n    var onParsed, onError;\n    onParsed = function (parsedData) {\n      this.removeListener('error', onError);\n      this.data = parsedData;\n      callback(null, this);\n    }.bind(this);\n    onError = function (err) {\n      this.removeListener('parsed', onParsed);\n      callback(err, null);\n    }.bind(this);\n    this.once('parsed', onParsed);\n    this.once('error', onError);\n  }\n  this.end(data);\n  return this;\n};\nPNG.prototype.write = function (data) {\n  this._parser.write(data);\n  return true;\n};\nPNG.prototype.end = function (data) {\n  this._parser.end(data);\n};\nPNG.prototype._metadata = function (metadata) {\n  this.width = metadata.width;\n  this.height = metadata.height;\n  this.emit('metadata', metadata);\n};\nPNG.prototype._gamma = function (gamma) {\n  this.gamma = gamma;\n};\nPNG.prototype._handleClose = function () {\n  if (!this._parser.writable && !this._packer.readable) {\n    this.emit('close');\n  }\n};\nPNG.bitblt = function (src, dst, srcX, srcY, width, height, deltaX, deltaY) {\n  // eslint-disable-line max-params\n\n  if (srcX > src.width || srcY > src.height || srcX + width > src.width || srcY + height > src.height) {\n    throw new Error('bitblt reading outside image');\n  }\n  if (deltaX > dst.width || deltaY > dst.height || deltaX + width > dst.width || deltaY + height > dst.height) {\n    throw new Error('bitblt writing outside image');\n  }\n  for (var y = 0; y < height; y++) {\n    src.data.copy(dst.data, (deltaY + y) * dst.width + deltaX << 2, (srcY + y) * src.width + srcX << 2, (srcY + y) * src.width + srcX + width << 2);\n  }\n};\nPNG.prototype.bitblt = function (dst, srcX, srcY, width, height, deltaX, deltaY) {\n  // eslint-disable-line max-params\n\n  PNG.bitblt(this, dst, srcX, srcY, width, height, deltaX, deltaY);\n  return this;\n};\nPNG.adjustGamma = function (src) {\n  if (src.gamma) {\n    for (var y = 0; y < src.height; y++) {\n      for (var x = 0; x < src.width; x++) {\n        var idx = src.width * y + x << 2;\n        for (var i = 0; i < 3; i++) {\n          var sample = src.data[idx + i] / 255;\n          sample = Math.pow(sample, 1 / 2.2 / src.gamma);\n          src.data[idx + i] = Math.round(sample * 255);\n        }\n      }\n    }\n    src.gamma = 0;\n  }\n};\nPNG.prototype.adjustGamma = function () {\n  PNG.adjustGamma(this);\n};","map":{"version":3,"names":["util","require","Stream","Parser","Packer","PNGSync","PNG","exports","options","call","width","height","data","Buffer","fill","gamma","readable","writable","_parser","on","emit","bind","_handleClose","_metadata","_gamma","_packer","inherits","sync","prototype","pack","length","process","nextTick","parse","callback","onParsed","onError","parsedData","removeListener","err","once","end","write","metadata","bitblt","src","dst","srcX","srcY","deltaX","deltaY","Error","y","copy","adjustGamma","x","idx","i","sample","Math","pow","round"],"sources":["/Users/yezery/Documents/大学素材/毕业设计/OASIS/OASIS_Interface/node_modules/.store/pngjs-nozlib@1.0.0/node_modules/pngjs-nozlib/lib/png.js"],"sourcesContent":["'use strict';\n\nvar util = require('util');\nvar Stream = require('stream');\nvar Parser = require('./parser-async');\nvar Packer = require('./packer-async');\nvar PNGSync = require('./png-sync');\n\n\nvar PNG = exports.PNG = function(options) {\n  Stream.call(this);\n\n  options = options || {}; // eslint-disable-line no-param-reassign\n\n  this.width = options.width || 0;\n  this.height = options.height || 0;\n\n  this.data = this.width > 0 && this.height > 0 ?\n    new Buffer(4 * this.width * this.height) : null;\n\n  if (options.fill && this.data) {\n    this.data.fill(0);\n  }\n\n  this.gamma = 0;\n  this.readable = this.writable = true;\n\n  this._parser = new Parser(options);\n\n  this._parser.on('error', this.emit.bind(this, 'error'));\n  this._parser.on('close', this._handleClose.bind(this));\n  this._parser.on('metadata', this._metadata.bind(this));\n  this._parser.on('gamma', this._gamma.bind(this));\n  this._parser.on('parsed', function(data) {\n    this.data = data;\n    this.emit('parsed', data);\n  }.bind(this));\n\n  this._packer = new Packer(options);\n  this._packer.on('data', this.emit.bind(this, 'data'));\n  this._packer.on('end', this.emit.bind(this, 'end'));\n  this._parser.on('close', this._handleClose.bind(this));\n  this._packer.on('error', this.emit.bind(this, 'error'));\n\n};\nutil.inherits(PNG, Stream);\n\nPNG.sync = PNGSync;\n\nPNG.prototype.pack = function() {\n\n  if (!this.data || !this.data.length) {\n    this.emit('error', 'No data provided');\n    return this;\n  }\n\n  process.nextTick(function() {\n    this._packer.pack(this.data, this.width, this.height, this.gamma);\n  }.bind(this));\n\n  return this;\n};\n\n\nPNG.prototype.parse = function(data, callback) {\n\n  if (callback) {\n    var onParsed, onError;\n\n    onParsed = function(parsedData) {\n      this.removeListener('error', onError);\n\n      this.data = parsedData;\n      callback(null, this);\n    }.bind(this);\n\n    onError = function(err) {\n      this.removeListener('parsed', onParsed);\n\n      callback(err, null);\n    }.bind(this);\n\n    this.once('parsed', onParsed);\n    this.once('error', onError);\n  }\n\n  this.end(data);\n  return this;\n};\n\nPNG.prototype.write = function(data) {\n  this._parser.write(data);\n  return true;\n};\n\nPNG.prototype.end = function(data) {\n  this._parser.end(data);\n};\n\nPNG.prototype._metadata = function(metadata) {\n  this.width = metadata.width;\n  this.height = metadata.height;\n\n  this.emit('metadata', metadata);\n};\n\nPNG.prototype._gamma = function(gamma) {\n  this.gamma = gamma;\n};\n\nPNG.prototype._handleClose = function() {\n  if (!this._parser.writable && !this._packer.readable) {\n    this.emit('close');\n  }\n};\n\n\nPNG.bitblt = function(src, dst, srcX, srcY, width, height, deltaX, deltaY) { // eslint-disable-line max-params\n\n  if (srcX > src.width || srcY > src.height || srcX + width > src.width || srcY + height > src.height) {\n    throw new Error('bitblt reading outside image');\n  }\n\n  if (deltaX > dst.width || deltaY > dst.height || deltaX + width > dst.width || deltaY + height > dst.height) {\n    throw new Error('bitblt writing outside image');\n  }\n\n  for (var y = 0; y < height; y++) {\n    src.data.copy(dst.data,\n      ((deltaY + y) * dst.width + deltaX) << 2,\n      ((srcY + y) * src.width + srcX) << 2,\n      ((srcY + y) * src.width + srcX + width) << 2\n    );\n  }\n};\n\n\nPNG.prototype.bitblt = function(dst, srcX, srcY, width, height, deltaX, deltaY) { // eslint-disable-line max-params\n\n  PNG.bitblt(this, dst, srcX, srcY, width, height, deltaX, deltaY);\n  return this;\n};\n\nPNG.adjustGamma = function(src) {\n  if (src.gamma) {\n    for (var y = 0; y < src.height; y++) {\n      for (var x = 0; x < src.width; x++) {\n        var idx = (src.width * y + x) << 2;\n\n        for (var i = 0; i < 3; i++) {\n          var sample = src.data[idx + i] / 255;\n          sample = Math.pow(sample, 1 / 2.2 / src.gamma);\n          src.data[idx + i] = Math.round(sample * 255);\n        }\n      }\n    }\n    src.gamma = 0;\n  }\n};\n\nPNG.prototype.adjustGamma = function() {\n  PNG.adjustGamma(this);\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}