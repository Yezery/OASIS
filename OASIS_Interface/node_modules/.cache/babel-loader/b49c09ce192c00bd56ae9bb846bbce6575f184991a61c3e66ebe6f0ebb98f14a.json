{"ast":null,"code":"import { cache } from '../cache.js';\nimport { resolveService } from './resolve-service.js';\nexport const ALIVE = 'ssdp:alive';\nexport const BYEBYE = 'ssdp:byebye';\nexport function notify(ssdp, message) {\n  if (message.LOCATION == null || message.USN == null || message.NT == null || message.NTS == null) {\n    return;\n  }\n  if (message.NTS === BYEBYE) {\n    cache.deleteService(message.NT, message.USN);\n    ssdp.emit('service:remove', message.USN);\n    return;\n  }\n  resolveService(ssdp, message.USN, message.NT, message.LOCATION, message.ttl()).catch(err => {\n    ssdp.emit('error', err);\n  });\n}","map":{"version":3,"names":["cache","resolveService","ALIVE","BYEBYE","notify","ssdp","message","LOCATION","USN","NT","NTS","deleteService","emit","ttl","catch","err"],"sources":["../../../src/commands/notify.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,KAAK,QAAQ,aAAa;AACnC,SAASC,cAAc,QAAQ,sBAAsB;AAGrD,OAAO,MAAMC,KAAK,GAAG,YAAY;AACjC,OAAO,MAAMC,MAAM,GAAG,aAAa;AAEnC,OAAM,SAAUC,MAAMA,CAAEC,IAAU,EAAEC,OAAsB;EACxD,IAAIA,OAAO,CAACC,QAAQ,IAAI,IAAI,IAAID,OAAO,CAACE,GAAG,IAAI,IAAI,IAAIF,OAAO,CAACG,EAAE,IAAI,IAAI,IAAIH,OAAO,CAACI,GAAG,IAAI,IAAI,EAAE;IAChG;;EAGF,IAAIJ,OAAO,CAACI,GAAG,KAAKP,MAAM,EAAE;IAC1BH,KAAK,CAACW,aAAa,CAACL,OAAO,CAACG,EAAE,EAAEH,OAAO,CAACE,GAAG,CAAC;IAE5CH,IAAI,CAACO,IAAI,CAAC,gBAAgB,EAAEN,OAAO,CAACE,GAAG,CAAC;IAExC;;EAGFP,cAAc,CAACI,IAAI,EAAEC,OAAO,CAACE,GAAG,EAAEF,OAAO,CAACG,EAAE,EAAEH,OAAO,CAACC,QAAQ,EAAED,OAAO,CAACO,GAAG,EAAE,CAAC,CAC3EC,KAAK,CAACC,GAAG,IAAG;IACXV,IAAI,CAACO,IAAI,CAAC,OAAO,EAAEG,GAAG,CAAC;EACzB,CAAC,CAAC;AACN"},"metadata":{},"sourceType":"module","externalDependencies":[]}