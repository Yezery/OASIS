{"ast":null,"code":"import { ERR_INVALID_PEER_SCORE_THRESHOLDS } from './constants.js';\nimport { CodeError } from '@libp2p/interfaces/errors';\nexport const defaultPeerScoreThresholds = {\n  gossipThreshold: -10,\n  publishThreshold: -50,\n  graylistThreshold: -80,\n  acceptPXThreshold: 10,\n  opportunisticGraftThreshold: 20\n};\nexport function createPeerScoreThresholds(p = {}) {\n  return {\n    ...defaultPeerScoreThresholds,\n    ...p\n  };\n}\nexport function validatePeerScoreThresholds(p) {\n  if (p.gossipThreshold > 0) {\n    throw new CodeError('invalid gossip threshold; it must be <= 0', ERR_INVALID_PEER_SCORE_THRESHOLDS);\n  }\n  if (p.publishThreshold > 0 || p.publishThreshold > p.gossipThreshold) {\n    throw new CodeError('invalid publish threshold; it must be <= 0 and <= gossip threshold', ERR_INVALID_PEER_SCORE_THRESHOLDS);\n  }\n  if (p.graylistThreshold > 0 || p.graylistThreshold > p.publishThreshold) {\n    throw new CodeError('invalid graylist threshold; it must be <= 0 and <= publish threshold', ERR_INVALID_PEER_SCORE_THRESHOLDS);\n  }\n  if (p.acceptPXThreshold < 0) {\n    throw new CodeError('invalid accept PX threshold; it must be >= 0', ERR_INVALID_PEER_SCORE_THRESHOLDS);\n  }\n  if (p.opportunisticGraftThreshold < 0) {\n    throw new CodeError('invalid opportunistic grafting threshold; it must be >= 0', ERR_INVALID_PEER_SCORE_THRESHOLDS);\n  }\n}","map":{"version":3,"names":["ERR_INVALID_PEER_SCORE_THRESHOLDS","CodeError","defaultPeerScoreThresholds","gossipThreshold","publishThreshold","graylistThreshold","acceptPXThreshold","opportunisticGraftThreshold","createPeerScoreThresholds","p","validatePeerScoreThresholds"],"sources":["../../../src/score/peer-score-thresholds.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,iCAAiC,QAAQ,gBAAgB;AAClE,SAASC,SAAS,QAAQ,2BAA2B;AAsCrD,OAAO,MAAMC,0BAA0B,GAAwB;EAC7DC,eAAe,EAAE,CAAC,EAAE;EACpBC,gBAAgB,EAAE,CAAC,EAAE;EACrBC,iBAAiB,EAAE,CAAC,EAAE;EACtBC,iBAAiB,EAAE,EAAE;EACrBC,2BAA2B,EAAE;CAC9B;AAED,OAAM,SAAUC,yBAAyBA,CAACC,CAAA,GAAkC,EAAE;EAC5E,OAAO;IACL,GAAGP,0BAA0B;IAC7B,GAAGO;GACJ;AACH;AAEA,OAAM,SAAUC,2BAA2BA,CAACD,CAAsB;EAChE,IAAIA,CAAC,CAACN,eAAe,GAAG,CAAC,EAAE;IACzB,MAAM,IAAIF,SAAS,CAAC,2CAA2C,EAAED,iCAAiC,CAAC;;EAErG,IAAIS,CAAC,CAACL,gBAAgB,GAAG,CAAC,IAAIK,CAAC,CAACL,gBAAgB,GAAGK,CAAC,CAACN,eAAe,EAAE;IACpE,MAAM,IAAIF,SAAS,CACjB,oEAAoE,EACpED,iCAAiC,CAClC;;EAEH,IAAIS,CAAC,CAACJ,iBAAiB,GAAG,CAAC,IAAII,CAAC,CAACJ,iBAAiB,GAAGI,CAAC,CAACL,gBAAgB,EAAE;IACvE,MAAM,IAAIH,SAAS,CACjB,sEAAsE,EACtED,iCAAiC,CAClC;;EAEH,IAAIS,CAAC,CAACH,iBAAiB,GAAG,CAAC,EAAE;IAC3B,MAAM,IAAIL,SAAS,CAAC,8CAA8C,EAAED,iCAAiC,CAAC;;EAExG,IAAIS,CAAC,CAACF,2BAA2B,GAAG,CAAC,EAAE;IACrC,MAAM,IAAIN,SAAS,CAAC,2DAA2D,EAAED,iCAAiC,CAAC;;AAEvH"},"metadata":{},"sourceType":"module","externalDependencies":[]}