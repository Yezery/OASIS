{"ast":null,"code":"import { CodeError } from '@libp2p/interfaces/errors';\nimport { toString as uint8ArrayToString } from 'uint8arrays/to-string';\nimport { fromString as uint8ArrayFromString } from 'uint8arrays/from-string';\n\n/**\n * @typedef {import('interface-datastore').Key} Key\n */\n\nconst namespace = '/record/';\n\n/**\n * @param {Uint8Array} buf\n */\nexport function encodeBase32(buf) {\n  return uint8ArrayToString(buf, 'base32');\n}\n\n/**\n * converts a binary record key to a pubsub topic key\n *\n * @param {Uint8Array | string} key\n */\nexport function keyToTopic(key) {\n  // Record-store keys are arbitrary binary. However, pubsub requires UTF-8 string topic IDs\n  // Encodes to \"/record/base64url(key)\"\n  if (typeof key === 'string' || key instanceof String) {\n    key = uint8ArrayFromString(key.toString());\n  }\n  const b64url = uint8ArrayToString(key, 'base64url');\n  return `${namespace}${b64url}`;\n}\n\n/**\n * converts a pubsub topic key to a binary record key\n *\n * @param {string} topic\n */\nexport function topicToKey(topic) {\n  if (topic.substring(0, namespace.length) !== namespace) {\n    throw new CodeError('topic received is not from a record', 'ERR_TOPIC_IS_NOT_FROM_RECORD_NAMESPACE');\n  }\n  const key = topic.substring(namespace.length);\n  return uint8ArrayFromString(key, 'base64url');\n}","map":{"version":3,"names":["CodeError","toString","uint8ArrayToString","fromString","uint8ArrayFromString","namespace","encodeBase32","buf","keyToTopic","key","String","b64url","topicToKey","topic","substring","length"],"sources":["/Users/yezery/Oasis/OASIS/node_modules/.store/datastore-pubsub@7.0.0/node_modules/datastore-pubsub/src/utils.js"],"sourcesContent":["import { CodeError } from '@libp2p/interfaces/errors'\nimport { toString as uint8ArrayToString } from 'uint8arrays/to-string'\nimport { fromString as uint8ArrayFromString } from 'uint8arrays/from-string'\n\n/**\n * @typedef {import('interface-datastore').Key} Key\n */\n\nconst namespace = '/record/'\n\n/**\n * @param {Uint8Array} buf\n */\nexport function encodeBase32 (buf) {\n  return uint8ArrayToString(buf, 'base32')\n}\n\n/**\n * converts a binary record key to a pubsub topic key\n *\n * @param {Uint8Array | string} key\n */\nexport function keyToTopic (key) {\n  // Record-store keys are arbitrary binary. However, pubsub requires UTF-8 string topic IDs\n  // Encodes to \"/record/base64url(key)\"\n  if (typeof key === 'string' || key instanceof String) {\n    key = uint8ArrayFromString(key.toString())\n  }\n\n  const b64url = uint8ArrayToString(key, 'base64url')\n\n  return `${namespace}${b64url}`\n}\n\n/**\n * converts a pubsub topic key to a binary record key\n *\n * @param {string} topic\n */\nexport function topicToKey (topic) {\n  if (topic.substring(0, namespace.length) !== namespace) {\n    throw new CodeError('topic received is not from a record', 'ERR_TOPIC_IS_NOT_FROM_RECORD_NAMESPACE')\n  }\n\n  const key = topic.substring(namespace.length)\n\n  return uint8ArrayFromString(key, 'base64url')\n}\n"],"mappings":"AAAA,SAASA,SAAS,QAAQ,2BAA2B;AACrD,SAASC,QAAQ,IAAIC,kBAAkB,QAAQ,uBAAuB;AACtE,SAASC,UAAU,IAAIC,oBAAoB,QAAQ,yBAAyB;;AAE5E;AACA;AACA;;AAEA,MAAMC,SAAS,GAAG,UAAU;;AAE5B;AACA;AACA;AACA,OAAO,SAASC,YAAYA,CAAEC,GAAG,EAAE;EACjC,OAAOL,kBAAkB,CAACK,GAAG,EAAE,QAAQ,CAAC;AAC1C;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,UAAUA,CAAEC,GAAG,EAAE;EAC/B;EACA;EACA,IAAI,OAAOA,GAAG,KAAK,QAAQ,IAAIA,GAAG,YAAYC,MAAM,EAAE;IACpDD,GAAG,GAAGL,oBAAoB,CAACK,GAAG,CAACR,QAAQ,CAAC,CAAC,CAAC;EAC5C;EAEA,MAAMU,MAAM,GAAGT,kBAAkB,CAACO,GAAG,EAAE,WAAW,CAAC;EAEnD,OAAQ,GAAEJ,SAAU,GAAEM,MAAO,EAAC;AAChC;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,UAAUA,CAAEC,KAAK,EAAE;EACjC,IAAIA,KAAK,CAACC,SAAS,CAAC,CAAC,EAAET,SAAS,CAACU,MAAM,CAAC,KAAKV,SAAS,EAAE;IACtD,MAAM,IAAIL,SAAS,CAAC,qCAAqC,EAAE,wCAAwC,CAAC;EACtG;EAEA,MAAMS,GAAG,GAAGI,KAAK,CAACC,SAAS,CAACT,SAAS,CAACU,MAAM,CAAC;EAE7C,OAAOX,oBAAoB,CAACK,GAAG,EAAE,WAAW,CAAC;AAC/C"},"metadata":{},"sourceType":"module","externalDependencies":[]}