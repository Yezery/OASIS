{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport batch from 'it-batch';\n\n/**\n * @typedef {import('../../types').FileDAGBuilder} FileDAGBuilder\n */\n\n/**\n * @type {FileDAGBuilder}\n */\nfunction balanced(source, reduce, options) {\n  return reduceToParents(source, reduce, options);\n}\n\n/**\n * @type {FileDAGBuilder}\n */\nasync function reduceToParents(source, reduce, options) {\n  const roots = [];\n  for await (const chunked of batch(source, options.maxChildrenPerNode)) {\n    roots.push(await reduce(chunked));\n  }\n  if (roots.length > 1) {\n    return reduceToParents(roots, reduce, options);\n  }\n  return roots[0];\n}\nexport default balanced;","map":{"version":3,"names":["batch","balanced","source","reduce","options","reduceToParents","roots","chunked","maxChildrenPerNode","push","length"],"sources":["/Users/yezery/Oasis/OASIS/node_modules/.store/ipfs-unixfs-importer@12.0.1/node_modules/ipfs-unixfs-importer/src/dag-builder/file/balanced.js"],"sourcesContent":["import batch from 'it-batch'\n\n/**\n * @typedef {import('../../types').FileDAGBuilder} FileDAGBuilder\n */\n\n/**\n * @type {FileDAGBuilder}\n */\nfunction balanced (source, reduce, options) {\n  return reduceToParents(source, reduce, options)\n}\n\n/**\n * @type {FileDAGBuilder}\n */\nasync function reduceToParents (source, reduce, options) {\n  const roots = []\n\n  for await (const chunked of batch(source, options.maxChildrenPerNode)) {\n    roots.push(await reduce(chunked))\n  }\n\n  if (roots.length > 1) {\n    return reduceToParents(roots, reduce, options)\n  }\n\n  return roots[0]\n}\n\nexport default balanced\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,UAAU;;AAE5B;AACA;AACA;;AAEA;AACA;AACA;AACA,SAASC,QAAQA,CAAEC,MAAM,EAAEC,MAAM,EAAEC,OAAO,EAAE;EAC1C,OAAOC,eAAe,CAACH,MAAM,EAAEC,MAAM,EAAEC,OAAO,CAAC;AACjD;;AAEA;AACA;AACA;AACA,eAAeC,eAAeA,CAAEH,MAAM,EAAEC,MAAM,EAAEC,OAAO,EAAE;EACvD,MAAME,KAAK,GAAG,EAAE;EAEhB,WAAW,MAAMC,OAAO,IAAIP,KAAK,CAACE,MAAM,EAAEE,OAAO,CAACI,kBAAkB,CAAC,EAAE;IACrEF,KAAK,CAACG,IAAI,CAAC,MAAMN,MAAM,CAACI,OAAO,CAAC,CAAC;EACnC;EAEA,IAAID,KAAK,CAACI,MAAM,GAAG,CAAC,EAAE;IACpB,OAAOL,eAAe,CAACC,KAAK,EAAEH,MAAM,EAAEC,OAAO,CAAC;EAChD;EAEA,OAAOE,KAAK,CAAC,CAAC,CAAC;AACjB;AAEA,eAAeL,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}