{"ast":null,"code":"'use strict';\n\nrequire(\"core-js/modules/es.array.push.js\");\nvar hasSyncZlib = true;\nvar zlib = require('zlib');\nif (!zlib.deflateSync) {\n  hasSyncZlib = false;\n}\nvar constants = require('./constants');\nvar Packer = require('./packer');\nmodule.exports = function (metaData, opt) {\n  if (!hasSyncZlib) {\n    throw new Error('To use the sync capability of this library in old node versions, please also add a dependency on node-zlb-backport');\n  }\n  var options = opt || {};\n  var packer = new Packer(options);\n  var chunks = [];\n\n  // Signature\n  chunks.push(new Buffer(constants.PNG_SIGNATURE));\n\n  // Header\n  chunks.push(packer.packIHDR(metaData.width, metaData.height));\n  if (metaData.gamma) {\n    chunks.push(packer.packGAMA(metaData.gamma));\n  }\n  var filteredData = packer.filterData(metaData.data, metaData.width, metaData.height);\n\n  // compress it\n  var compressedData = zlib.deflateSync(filteredData, packer.getDeflateOptions());\n  filteredData = null;\n  if (!compressedData || !compressedData.length) {\n    throw new Error('bad png - invalid compressed data response');\n  }\n  chunks.push(packer.packIDAT(compressedData));\n\n  // End\n  chunks.push(packer.packIEND());\n  return Buffer.concat(chunks);\n};","map":{"version":3,"names":["require","hasSyncZlib","zlib","deflateSync","constants","Packer","module","exports","metaData","opt","Error","options","packer","chunks","push","Buffer","PNG_SIGNATURE","packIHDR","width","height","gamma","packGAMA","filteredData","filterData","data","compressedData","getDeflateOptions","length","packIDAT","packIEND","concat"],"sources":["/Users/yezery/Documents/大学素材/毕业设计/OASIS/OASIS_Interface/node_modules/.store/pngjs-nozlib@1.0.0/node_modules/pngjs-nozlib/lib/packer-sync.js"],"sourcesContent":["'use strict';\n\nvar hasSyncZlib = true;\nvar zlib = require('zlib');\nif (!zlib.deflateSync) {\n  hasSyncZlib = false;\n}\nvar constants = require('./constants');\nvar Packer = require('./packer');\n\nmodule.exports = function(metaData, opt) {\n\n  if (!hasSyncZlib) {\n    throw new Error('To use the sync capability of this library in old node versions, please also add a dependency on node-zlb-backport');\n  }\n\n  var options = opt || {};\n\n  var packer = new Packer(options);\n\n  var chunks = [];\n\n  // Signature\n  chunks.push(new Buffer(constants.PNG_SIGNATURE));\n\n  // Header\n  chunks.push(packer.packIHDR(metaData.width, metaData.height));\n\n  if (metaData.gamma) {\n    chunks.push(packer.packGAMA(metaData.gamma));\n  }\n\n  var filteredData = packer.filterData(metaData.data, metaData.width, metaData.height);\n\n  // compress it\n  var compressedData = zlib.deflateSync(filteredData, packer.getDeflateOptions());\n  filteredData = null;\n\n  if (!compressedData || !compressedData.length) {\n    throw new Error('bad png - invalid compressed data response');\n  }\n  chunks.push(packer.packIDAT(compressedData));\n\n  // End\n  chunks.push(packer.packIEND());\n\n  return Buffer.concat(chunks);\n};\n"],"mappings":"AAAA,YAAY;;AAACA,OAAA;AAEb,IAAIC,WAAW,GAAG,IAAI;AACtB,IAAIC,IAAI,GAAGF,OAAO,CAAC,MAAM,CAAC;AAC1B,IAAI,CAACE,IAAI,CAACC,WAAW,EAAE;EACrBF,WAAW,GAAG,KAAK;AACrB;AACA,IAAIG,SAAS,GAAGJ,OAAO,CAAC,aAAa,CAAC;AACtC,IAAIK,MAAM,GAAGL,OAAO,CAAC,UAAU,CAAC;AAEhCM,MAAM,CAACC,OAAO,GAAG,UAASC,QAAQ,EAAEC,GAAG,EAAE;EAEvC,IAAI,CAACR,WAAW,EAAE;IAChB,MAAM,IAAIS,KAAK,CAAC,oHAAoH,CAAC;EACvI;EAEA,IAAIC,OAAO,GAAGF,GAAG,IAAI,CAAC,CAAC;EAEvB,IAAIG,MAAM,GAAG,IAAIP,MAAM,CAACM,OAAO,CAAC;EAEhC,IAAIE,MAAM,GAAG,EAAE;;EAEf;EACAA,MAAM,CAACC,IAAI,CAAC,IAAIC,MAAM,CAACX,SAAS,CAACY,aAAa,CAAC,CAAC;;EAEhD;EACAH,MAAM,CAACC,IAAI,CAACF,MAAM,CAACK,QAAQ,CAACT,QAAQ,CAACU,KAAK,EAAEV,QAAQ,CAACW,MAAM,CAAC,CAAC;EAE7D,IAAIX,QAAQ,CAACY,KAAK,EAAE;IAClBP,MAAM,CAACC,IAAI,CAACF,MAAM,CAACS,QAAQ,CAACb,QAAQ,CAACY,KAAK,CAAC,CAAC;EAC9C;EAEA,IAAIE,YAAY,GAAGV,MAAM,CAACW,UAAU,CAACf,QAAQ,CAACgB,IAAI,EAAEhB,QAAQ,CAACU,KAAK,EAAEV,QAAQ,CAACW,MAAM,CAAC;;EAEpF;EACA,IAAIM,cAAc,GAAGvB,IAAI,CAACC,WAAW,CAACmB,YAAY,EAAEV,MAAM,CAACc,iBAAiB,CAAC,CAAC,CAAC;EAC/EJ,YAAY,GAAG,IAAI;EAEnB,IAAI,CAACG,cAAc,IAAI,CAACA,cAAc,CAACE,MAAM,EAAE;IAC7C,MAAM,IAAIjB,KAAK,CAAC,4CAA4C,CAAC;EAC/D;EACAG,MAAM,CAACC,IAAI,CAACF,MAAM,CAACgB,QAAQ,CAACH,cAAc,CAAC,CAAC;;EAE5C;EACAZ,MAAM,CAACC,IAAI,CAACF,MAAM,CAACiB,QAAQ,CAAC,CAAC,CAAC;EAE9B,OAAOd,MAAM,CAACe,MAAM,CAACjB,MAAM,CAAC;AAC9B,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}