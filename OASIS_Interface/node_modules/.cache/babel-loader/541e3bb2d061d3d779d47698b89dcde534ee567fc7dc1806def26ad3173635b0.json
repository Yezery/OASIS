{"ast":null,"code":"import defer from 'p-defer';\n/**\n * A pair of streams where one drains from the other\n */\nexport function pair() {\n  const deferred = defer();\n  let piped = false;\n  return {\n    sink: async source => {\n      if (piped) {\n        throw new Error('already piped');\n      }\n      piped = true;\n      deferred.resolve(source);\n    },\n    source: async function* () {\n      const source = await deferred.promise;\n      yield* source;\n    }()\n  };\n}","map":{"version":3,"names":["defer","pair","deferred","piped","sink","source","Error","resolve","promise"],"sources":["../../src/index.ts"],"sourcesContent":[null],"mappings":"AAAA,OAAOA,KAAK,MAAM,SAAS;AAG3B;;;AAGA,OAAM,SAAUC,IAAIA,CAAA;EAClB,MAAMC,QAAQ,GAAGF,KAAK,EAAa;EACnC,IAAIG,KAAK,GAAG,KAAK;EAEjB,OAAO;IACLC,IAAI,EAAE,MAAMC,MAAM,IAAG;MACnB,IAAIF,KAAK,EAAE;QACT,MAAM,IAAIG,KAAK,CAAC,eAAe,CAAC;;MAGlCH,KAAK,GAAG,IAAI;MACZD,QAAQ,CAACK,OAAO,CAACF,MAAM,CAAC;IAC1B,CAAC;IACDA,MAAM,EAAG,mBAAgB;MACvB,MAAMA,MAAM,GAAG,MAAMH,QAAQ,CAACM,OAAO;MAErC,OAAQH,MAAM;IAChB,CAAC;GACF;AACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}