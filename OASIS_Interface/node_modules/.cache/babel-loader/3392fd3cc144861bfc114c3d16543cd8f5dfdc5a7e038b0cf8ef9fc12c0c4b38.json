{"ast":null,"code":"import { getNFTStruct } from \"@/api/axios/contract\";\nimport { addMint } from \"@/api/axios/contract\";\nexport default {\n  data() {\n    return {\n      imageUrl: \"\",\n      dialogImageUrl: \"\",\n      dialogVisible: false,\n      disabled: false,\n      fileList: [],\n      seriesName: \"\",\n      symbol: \"\",\n      nftContractAddress: \"\",\n      Description: \"\",\n      maxmums: 0,\n      NFTName: \"\",\n      to: this.$store.state.currentAddress,\n      sumitEnable: true,\n      isRepeatClick: true\n    };\n  },\n  async mounted() {\n    this.nftContractAddress = this.$route.query.nftContract;\n    await this.init();\n  },\n  computed: {\n    canSubmit() {\n      if (this.seriesName == \"\" || this.symbol == \"\" || this.$refs.pictureUpload.uploadFiles.length == 0 || this.NFTName == \"\") {\n        return false;\n      } else {\n        return true;\n      }\n    }\n  },\n  methods: {\n    async init() {\n      let contract = await getNFTStruct(this.nftContractAddress);\n      await contract.methods.symbol().call().then(re => {\n        this.symbol = re;\n      });\n      await contract.methods.name().call().then(re => {\n        this.seriesName = re;\n      });\n      await contract.methods._maximums().call().then(re => {\n        this.maxmums = re;\n      });\n    },\n    async addMint() {\n      if (this.isRepeatClick) {\n        this.isRepeatClick = false;\n        if (this.$refs.pictureUpload.uploadFiles[0].raw.type == \"image/jepg\" || this.$refs.pictureUpload.uploadFiles[0].raw.type == \"image/png\" || this.$refs.pictureUpload.uploadFiles[0].raw.type == \"image/jpg\") {\n          try {\n            await addMint(this.to, this.nftContractAddress, this.NFTName, this.Description, this.$refs.pictureUpload.uploadFiles, this.seriesName, this.symbol, this.maxmums);\n            this.$notify({\n              title: \"添加成功\",\n              type: \"success\",\n              position: \"top-left\",\n              offset: 200\n            });\n            this.fileList = [];\n            this.NFTName = \"\";\n            this.maxmums = 1;\n            this.Description = \"\";\n            window.ethereum.request({\n              method: \"wallet_watchAsset\",\n              params: {\n                type: \"ERC721\",\n                options: {\n                  address: \"0xEC1Df48dF712Cd7432Bc931bee0004A336eC1258\",\n                  tokenId: \"1\",\n                  symbol: \"qqq\",\n                  image: \"http://10.39.5.194:8080/ipfs/QmWkcPJGf71AksHEbjeSvoNJzWBqHCucs462eVqgn8B11y?filename=qqqq\"\n                }\n              }\n            }).then(success => {\n              if (success) {\n                console.log(\"FOO successfully added to wallet!\");\n              } else {\n                throw new Error(\"Something went wrong.\");\n              }\n            }).catch(console.error);\n          } catch (error) {\n            this.$notify.error({\n              title: \"添加失败\",\n              position: \"top-left\",\n              offset: 200\n            });\n          }\n        } else {\n          this.$notify({\n            title: \"NFT格式不支持\",\n            type: \"warning\",\n            offset: 200\n          });\n        }\n      } else {\n        this.$notify({\n          title: \"请勿操作频繁\",\n          type: \"warning\",\n          position: \"top-left\",\n          offset: 200\n        });\n      }\n      setTimeout(() => {\n        this.isRepeatClick = true;\n      }, 5000);\n    },\n    handleRemove(file) {\n      let uploadFiles = this.$refs.pictureUpload.uploadFiles;\n      for (var i = 0; i < uploadFiles.length; i++) {\n        if (uploadFiles[i][\"url\"] == file.url) {\n          uploadFiles.splice(i, 1);\n        }\n      }\n    }\n  }\n};","map":{"version":3,"names":["getNFTStruct","addMint","data","imageUrl","dialogImageUrl","dialogVisible","disabled","fileList","seriesName","symbol","nftContractAddress","Description","maxmums","NFTName","to","$store","state","currentAddress","sumitEnable","isRepeatClick","mounted","$route","query","nftContract","init","computed","canSubmit","$refs","pictureUpload","uploadFiles","length","methods","contract","call","then","re","name","_maximums","raw","type","$notify","title","position","offset","window","ethereum","request","method","params","options","address","tokenId","image","success","console","log","Error","catch","error","setTimeout","handleRemove","file","i","url","splice"],"sources":["src/views/market/addMint.vue"],"sourcesContent":["<template>\n  <div class=\"MainWindow animate__animated animate__fadeInRight\">\n    <div class=\"imitNFTFrame \">\n      <div class=\"imitNFTFrameTop\">\n        <router-link :to=\"{ name: 'userhome' }\">\n          <i class=\"el-icon-arrow-left\" style=\"font-size: 2vw;\" />\n        </router-link>\n        <div class=\"ImitTitle\">\n          Add NFTs to your collection\n        </div>\n        <div class=\"imitNFTFrameTop_tipsBox\">\n          为你的系列增加NFT\n        </div>\n      </div>\n      <div class=\"imitNFTFrameMain\">\n        <div class=\"imitNFTFrameMain_left\">\n          <div class=\"imageUpLoad\">\n            <el-upload action=\"#\" list-type=\"picture-card\" ref=\"pictureUpload\" :file-list=\"fileList\" :auto-upload=\"false\">\n              <i slot=\"default\" class=\"el-icon-picture\" style=\"\n              font-size: 82px;\n              color: var(--Dark--);\n              transition: all 0.3s ease-in-out;\n            \" />\n              <div slot=\"file\" slot-scope=\"{ file }\">\n                <img class=\"el-upload-list__item-thumbnail\" :src=\"file.url\" alt=\"\">\n                <span class=\"el-upload-list__item-actions\">\n                  <span v-if=\"!disabled\" class=\"el-upload-list__item-delete\" @click=\"handleRemove(file)\">\n                    <i class=\"el-icon-delete\" />\n                  </span>\n                </span>\n              </div>\n            </el-upload>\n            <el-dialog :visible.sync=\"dialogVisible\">\n              <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\n            </el-dialog>\n            <span style=\"color: red\">*</span><span style=\"color: var(--Dark--);font-weight: 800;font-size: 0.2vw;\">支持 JPG、PNG、JEPG 格式</span>\n          </div>\n        </div>\n        <div class=\"imitNFTFrameMain_right\">\n          <div class=\"selectBox\">\n            <div class=\"select\">\n              <div class=\"tipsBox\">\n                <div class=\"tipsTitle\">\n                  Name (NFT系列名)\n                </div>\n                <div class=\"tipsTitle2\">\n                  <span style=\"font-size: 1.5vw;font-weight: 800;margin-top: 2%;\"> {{ seriesName }}</span>\n                </div>\n              </div>\n            </div>\n            <div class=\"select\">\n              <div class=\"tipsBox\">\n                <div class=\"tipsTitle\">\n                  Symbol (该系列NFT代币符号)\n                </div>\n                <div class=\"tipsTitle2\">\n                  <span style=\"font-size: 1.5vw;font-weight: 800;margin-top: 2%\">{{ symbol }}</span>\n                </div>\n              </div>\n            </div>\n            <div class=\"select\">\n              <div class=\"tipsBox\">\n                <div class=\"tipsTitle\">\n                  <span style=\"color: red\">*</span> Add NFT Name\n                </div>\n                <div class=\"tipsTitle2\">\n                  新增加的NFT\n                </div>\n              </div>\n              <el-input v-model=\"NFTName\" placeholder=\"Please enter the name of Genesis NFT\" />\n            </div>\n            <div class=\"select\">\n              <div class=\"tipsBox\">\n                <div class=\"tipsTitle\">\n                  Description\n                </div>\n                <div class=\"tipsTitle2\">\n                  描述将包含在商品详情页面上图片下方。\n                </div>\n              </div>\n              <el-input type=\"textarea\" v-model=\"Description\" placeholder=\"Please add a description\" />\n            </div>\n            <div class=\"select\">\n              <div class=\"tipsBox\">\n                <div class=\"tipsTitle\">\n                  As a gift (optional)\n                </div>\n                <div class=\"tipsTitle2\">\n                  作为礼物赠送（可选）\n                </div>\n              </div>\n              <el-input placeholder=\"请输入赠送者地址\" v-model=\"to\">\n                <template slot=\"prepend\">\n                  <img width=\"25px\" height=\"25px\" src=\"../../assets/SVG/Love.svg\" alt=\"SVG Image\" style=\"color:\">\n                </template>\n              </el-input>\n            </div>\n          </div>\n          <div class=\"select\">\n            <div class=\"sumbitBox\">\n              <el-button @click=\"addMint\" :disabled=\"!canSubmit\" class=\"createButton\">\n                添加\n              </el-button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import { getNFTStruct } from \"@/api/axios/contract\";\n  import { addMint } from \"@/api/axios/contract\";\n  export default {\n    data() {\n      return {\n        imageUrl: \"\",\n        dialogImageUrl: \"\",\n        dialogVisible: false,\n        disabled: false,\n        fileList: [],\n        seriesName: \"\",\n        symbol: \"\",\n        nftContractAddress: \"\",\n        Description: \"\",\n        maxmums: 0,\n        NFTName: \"\",\n        to: this.$store.state.currentAddress,\n        sumitEnable: true,\n        isRepeatClick: true,\n      };\n    },\n    async mounted() {\n      this.nftContractAddress = this.$route.query.nftContract;\n      await this.init();\n    },\n    computed: {\n      canSubmit() {\n        if (\n          this.seriesName == \"\" ||\n          this.symbol == \"\" ||\n          this.$refs.pictureUpload.uploadFiles.length == 0 ||\n          this.NFTName == \"\"\n        ) {\n          return false;\n        } else {\n          return true;\n        }\n      },\n    },\n    methods: {\n      async init() {\n        let contract = await getNFTStruct(this.nftContractAddress);\n        await contract.methods\n          .symbol()\n          .call()\n          .then((re) => {\n            this.symbol = re;\n          });\n        await contract.methods\n          .name()\n          .call()\n          .then((re) => {\n            this.seriesName = re;\n          });\n        await contract.methods\n          ._maximums()\n          .call()\n          .then((re) => {\n            this.maxmums = re;\n          });\n      },\n      async addMint() {\n        if (this.isRepeatClick) {\n          this.isRepeatClick = false;\n          if (\n            this.$refs.pictureUpload.uploadFiles[0].raw.type == \"image/jepg\" ||\n            this.$refs.pictureUpload.uploadFiles[0].raw.type == \"image/png\" ||\n            this.$refs.pictureUpload.uploadFiles[0].raw.type == \"image/jpg\"\n          ) {\n            try {\n              await addMint(\n                this.to,\n                this.nftContractAddress,\n                this.NFTName,\n                this.Description,\n                this.$refs.pictureUpload.uploadFiles,\n                this.seriesName,\n                this.symbol,\n                this.maxmums\n              );\n              this.$notify({\n                title: \"添加成功\",\n                type: \"success\",\n                position: \"top-left\",\n                offset: 200,\n              });\n              this.fileList = [];\n              this.NFTName = \"\";\n              this.maxmums = 1;\n              this.Description = \"\";\n              window.ethereum\n                .request({\n                  method: \"wallet_watchAsset\",\n                  params: {\n                    type: \"ERC721\",\n                    options: {\n                      address: \"0xEC1Df48dF712Cd7432Bc931bee0004A336eC1258\",\n                      tokenId: \"1\",\n                      symbol: \"qqq\",\n                      image:\n                        \"http://10.39.5.194:8080/ipfs/QmWkcPJGf71AksHEbjeSvoNJzWBqHCucs462eVqgn8B11y?filename=qqqq\",\n                    },\n                  },\n                })\n                .then((success) => {\n                  if (success) {\n                    console.log(\"FOO successfully added to wallet!\");\n                  } else {\n                    throw new Error(\"Something went wrong.\");\n                  }\n                })\n                .catch(console.error);\n            } catch (error) {\n              this.$notify.error({\n                title: \"添加失败\",\n                position: \"top-left\",\n                offset: 200,\n              });\n            }\n          } else {\n            this.$notify({\n              title: \"NFT格式不支持\",\n              type: \"warning\",\n              offset: 200,\n            });\n          }\n        } else {\n          this.$notify({\n            title: \"请勿操作频繁\",\n            type: \"warning\",\n            position: \"top-left\",\n            offset: 200,\n          });\n        }\n\n        setTimeout(() => {\n          this.isRepeatClick = true;\n        }, 5000);\n      },\n      handleRemove(file) {\n        let uploadFiles = this.$refs.pictureUpload.uploadFiles;\n        for (var i = 0; i < uploadFiles.length; i++) {\n          if (uploadFiles[i][\"url\"] == file.url) {\n            uploadFiles.splice(i, 1);\n          }\n        }\n      },\n    },\n  };\n</script>\n\n<style lang=\"scss\" scoped>\n.MainWindow {\n  position: relative;\n  overflow: hidden;\n  font-family: Arial, Helvetica, sans-serif;\n  width: 97%;\n  border-radius: 40px;\n  background-color: var(--White--);\n  transition: all 0.3s ease-in-out;\n  margin: 1.3%;\n  padding-bottom: 8%;\n  .imitNFTFrame {\n    width: 100%;\n    .imitNFTFrameTop {\n      position: relative;\n      text-align: left;\n      padding-top: 2%;\n      padding-left: 4%;\n      .addImit {\n        font-size: 2vw;\n        position: absolute;\n        right: 0;\n        margin-right: 4%;\n        text-decoration: underline;\n      }\n      .imitNFTFrameTop_tipsBox {\n        width: 100%;\n        font-size: 20px;\n        color: rgb(163, 162, 162);\n        font-weight: 800;\n      }\n      a {\n        text-decoration: none;\n        color: var(--Dark--);\n      }\n    }\n    .imitNFTFrameMain {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      .imitNFTFrameMain_left {\n        height: 100%;\n        flex: 1;\n        /deep/ .imageUpLoad {\n          & div:first-child {\n            position: relative !important;\n            overflow: hidden;\n            height: 330px;\n          }\n          & .el-upload-list--picture-card .el-upload-list__item {\n            width: 305px;\n            height: 305px;\n            position: absolute !important;\n          }\n          & .el-upload--picture-card {\n            padding: 105px;\n            height: 305px;\n            width: 305px;\n            background-color: rgba(255, 255, 255, 0);\n            border: 3px dashed var(--Dark--);\n            border-radius: 20px;\n            transition: all 0.3s ease-in-out;\n          }\n          & .el-upload--picture-card:hover {\n            background-color: rgba(255, 255, 255, 0);\n          }\n        }\n      }\n      .imitNFTFrameMain_right {\n        width: 100%;\n        height: 100%;\n        flex: 1;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n        /deep/ .select {\n          width: 100%;\n          text-align: left;\n          margin-bottom: 30px;\n\n          .el-input__inner:not(.el-input__inner:last-child),\n          .el-textarea__inner {\n            font-family: Arial, Helvetica, sans-serif;\n            height: 50px;\n            margin-top: 1%;\n            background-color: white;\n            border-radius: 12px;\n            width: 25vw;\n            // color: var(--Dark--);\n            transition: all 0.3s ease-in-out;\n          }\n          .input_number {\n            margin-top: 1%;\n          }\n        }\n\n        .selectBox {\n          flex-direction: column;\n        }\n      }\n    }\n    .imitNFTFrameBottom {\n      display: flex;\n      background-color: blue;\n      justify-content: center;\n      align-items: center;\n      width: 100%;\n      .createTips {\n        width: 100%;\n        font-size: 55px;\n        color: var(--Dark--);\n        transition: all 0.3s ease-in-out;\n        z-index: 2;\n      }\n    }\n  }\n}\n\n.NFTImageSelectBox {\n  width: 76%;\n  text-align: left;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  transition: all 0.3s ease-in-out;\n}\n\n.ImitTitle {\n  font-size: 3.5vw;\n  width: 100%;\n  color: var(--Dark--);\n  margin-top: 1%;\n  font-weight: 800;\n  transition: all 0.3s ease-in-out;\n}\n.tipsBox {\n  width: 100%;\n  font-size: 15px;\n  color: rgb(163, 162, 162);\n  text-align: left;\n  transition: all 0.3s ease-in-out;\n  .tipsTitle {\n    margin-bottom: 1%;\n    width: 76%;\n    font-size: 16px;\n    font-weight: 800;\n    color: var(--Dark--);\n    transition: all 0.3s ease-in-out;\n  }\n  .tipsTitle2 {\n    font-size: 12px;\n    margin-bottom: 1%;\n  }\n}\n\n.sumbitBox {\n  text-align: left;\n  margin-top: 6%;\n  margin-bottom: 6%;\n  .createButton {\n    padding: 20px 35px 18px 35px;\n    font-size: 17px;\n    background-color: #fff;\n    border-radius: 15px;\n    transition: all 0.3s ease-in-out;\n    font-family: \"Transformers_Movie\";\n    color: black;\n    :hover {\n      color: black;\n    }\n  }\n  .is-disabled {\n    background-color: transparent;\n    color: #c0c4cc;\n    :hover {\n      color: #c0c4cc;\n    }\n  }\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}