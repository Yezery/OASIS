{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { pushable } from 'it-pushable';\nfunction isAsyncIterable(thing) {\n  return thing[Symbol.asyncIterator] != null;\n}\nfunction merge(...sources) {\n  const syncSources = [];\n  for (const source of sources) {\n    if (!isAsyncIterable(source)) {\n      syncSources.push(source);\n    }\n  }\n  if (syncSources.length === sources.length) {\n    // all sources are synchronous\n    return function* () {\n      for (const source of syncSources) {\n        yield* source;\n      }\n    }();\n  }\n  return async function* () {\n    const output = pushable({\n      objectMode: true\n    });\n    void Promise.resolve().then(async () => {\n      try {\n        await Promise.all(sources.map(async source => {\n          for await (const item of source) {\n            output.push(item);\n          }\n        }));\n        output.end();\n      } catch (err) {\n        output.end(err);\n      }\n    });\n    yield* output;\n  }();\n}\nexport default merge;","map":{"version":3,"names":["pushable","isAsyncIterable","thing","Symbol","asyncIterator","merge","sources","syncSources","source","push","length","output","objectMode","Promise","resolve","then","all","map","item","end","err"],"sources":["../../src/index.ts"],"sourcesContent":[null],"mappings":";AAAA,SAASA,QAAQ,QAAQ,aAAa;AAEtC,SAASC,eAAeA,CAAMC,KAAU;EACtC,OAAOA,KAAK,CAACC,MAAM,CAACC,aAAa,CAAC,IAAI,IAAI;AAC5C;AAUA,SAASC,KAAKA,CAAM,GAAGC,OAA8C;EACnE,MAAMC,WAAW,GAAuB,EAAE;EAE1C,KAAK,MAAMC,MAAM,IAAIF,OAAO,EAAE;IAC5B,IAAI,CAACL,eAAe,CAACO,MAAM,CAAC,EAAE;MAC5BD,WAAW,CAACE,IAAI,CAACD,MAAM,CAAC;;;EAI5B,IAAID,WAAW,CAACG,MAAM,KAAKJ,OAAO,CAACI,MAAM,EAAE;IACzC;IACA,OAAQ,aAAU;MAChB,KAAK,MAAMF,MAAM,IAAID,WAAW,EAAE;QAChC,OAAQC,MAAM;;IAElB,CAAC,CAAC,CAAE;;EAGN,OAAQ,mBAAgB;IACtB,MAAMG,MAAM,GAAGX,QAAQ,CAAI;MACzBY,UAAU,EAAE;KACb,CAAC;IAEF,KAAKC,OAAO,CAACC,OAAO,EAAE,CAACC,IAAI,CAAC,YAAW;MACrC,IAAI;QACF,MAAMF,OAAO,CAACG,GAAG,CACfV,OAAO,CAACW,GAAG,CAAC,MAAOT,MAAM,IAAI;UAC3B,WAAW,MAAMU,IAAI,IAAIV,MAAM,EAAE;YAC/BG,MAAM,CAACF,IAAI,CAACS,IAAI,CAAC;;QAErB,CAAC,CAAC,CACH;QAEDP,MAAM,CAACQ,GAAG,EAAE;OACb,CAAC,OAAOC,GAAQ,EAAE;QACjBT,MAAM,CAACQ,GAAG,CAACC,GAAG,CAAC;;IAEnB,CAAC,CAAC;IAEF,OAAQT,MAAM;EAChB,CAAC,CAAC,CAAE;AACN;AAEA,eAAeN,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}